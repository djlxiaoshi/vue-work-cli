webpackJsonp([1],{"/5hn":function(e,t){},"0daQ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"ServerError",data:function(){return{}},mounted:function(){},props:{type:{type:Number,default:1},redirectTo:{type:String,default:"/"}},methods:{}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"exception-page"},[this._m(0),this._v(" "),t("div",{staticClass:"right"},[t("h1",{staticClass:"item"},[this._v("500")]),this._v(" "),t("p",{staticClass:"item"},[this._v("抱歉，服务器出错了")]),this._v(" "),t("div",{staticClass:"item"},[t("el-button",{attrs:{type:"primary"}},[t("router-link",{attrs:{to:{path:"/"}}},[this._v("刷新重试")])],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"left"},[t("img",{attrs:{src:a("muAc")}})])}]};var s=a("Z0/y")(i,n,!1,function(e){a("tMME")},"data-v-5b9c4f11",null);t.default=s.exports},"1CWy":function(e,t){},"2E+P":function(e,t){},"2yYA":function(e,t){},"4Zrh":function(e,t){},"4i6x":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-cascader",{attrs:{size:"mini",options:e.option.list},on:{"active-item-change":e.cascadeItemChange,change:e.selectChange},model:{value:e.option.selected,callback:function(t){e.$set(e.option,"selected",t)},expression:"option.selected"}})},staticRenderFns:[]};var n=a("Z0/y")({name:"AppCascadeSelect",data:function(){return{}},props:["option"],methods:{cascadeItemChange:function(e){this.$emit("cascadeItemChange",e)},selectChange:function(e){this.$emit("cascadeSelectChange",e)}}},i,!1,function(e){a("MvJ+")},"data-v-393363e4",null);t.default=n.exports},"4rrD":function(e,t){},"6Dkw":function(e,t){},"7LVX":function(e,t){},A05D:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("z0pV"),n={name:"AppMenuItem",data:function(){return{}},mounted:function(){},props:{menus:{type:Array,default:function(){return[]}},basePath:{type:String,default:""},licenseKey:{type:Number,default:3}},methods:{isActive:function(e){return this.$route.matched.some(function(t){return t.path===e})},getFullPath:function(e){return i.join(this.basePath,e)}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-menu-item"},[e._l(e.menus,function(t){return[t.hidden||t.permission&&!t.permission.includes(e.licenseKey)?e._e():[t.children&&"top"!==t.childrenPosition?a("el-submenu",{key:t.path,staticClass:"el-submenu-title",class:{"is-active":e.isActive(e.getFullPath(t.path))},attrs:{index:t.path}},[a("template",{slot:"title"},[a("i",{staticClass:"fa icon",class:t.icon}),e._v(" "),a("span",{staticClass:"submenu-title",attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.label))])]),e._v(" "),t.children&&t.children.length?[a("AppMenuItem",{attrs:{menus:t.children,basePath:e.getFullPath(t.path)}})]:e._e()],2):a("el-menu-item",{key:e.basePath+"/"+t.path,class:{"is-active":e.isActive(e.getFullPath(t.path))},attrs:{index:e.getFullPath(t.path)}},[a("i",{staticClass:"fa icon",class:t.icon,attrs:{title:t.label}}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.label))])])]]})],2)},staticRenderFns:[]};var l=a("Z0/y")(n,s,!1,function(e){a("uMSl")},"data-v-b87e65c0",null);t.default=l.exports},A4dg:function(e,t){},BHQ3:function(e,t){},BnPR:function(e,t){},CXmb:function(e,t){},Dtqd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"AppMultiSelect",data:function(){return{selected:[],searchText:"",checkAll:!1,isIndeterminate:!1}},props:{option:{type:Object,default:function(){return{list:[],defaultSelectedNumber:1}}},title:{type:String,default:"数据筛选"}},created:function(){this.option.list&&Array.isArray(this.option.list)&&this.init()},mounted:function(){},methods:{init:function(){this.setDefaultSelected(),this.setDisabled(),this.setCheckAllBoxStatus()},setDefaultSelected:function(){var e=this.option,t=e.list&&Array.isArray(e.list)?e.list:[],a=e.selected;a&&Array.isArray(a)&&a.length?a=this.option.selected:(a=[],e.defaultSelectedIndexes?a=t.reduce(function(t,a,i){return~e.defaultSelectedIndexes.indexOf(i)&&t.push(a.value),t},[]):e.defaultSelectedNumber?a=t.reduce(function(t,a,i){return i<e.defaultSelectedNumber&&t.push(a.value),t},[]):e.list&&e.list.length&&(a=[this.option.list[0].value])),this.option.selected=this.selected=a},setDisabled:function(){var e=this,t=0;this.option.noLessThanNumber&&"number"==typeof this.option.noLessThanNumber&&this.option.noLessThanNumber>0&&(t=this.option.noLessThanNumber),this.option.list.forEach(function(a){~e.selected.indexOf(a.value)&&e.$set(a,"_disabled",e.selected.length<=t)})},selectChange:function(){this.setCheckAllBoxStatus(),this.setDisabled(),this.option.selected=this.selected},handleCheckAllChange:function(e){var t=[],a=this.option.noLessThanNumber||0;t=e?this.option.list.map(function(e){return e.value}):this.option.list.slice(0,a).map(function(e){return e.value}),this.option.selected=this.selected=t,this.setCheckAllBoxStatus(),this.setDisabled()},setCheckAllBoxStatus:function(){this.setCheckAll(),this.setIsIndeterminate()},setCheckAll:function(){if(!this.option.selected||!this.option.list)return!1;this.checkAll=this.selected.length===this.option.list.length},setIsIndeterminate:function(){this.isIndeterminate=this.selected.length>0&&this.selected.length<this.option.list.length},ensure:function(){this.$emit("multiSelectChange",this.selected)}},watch:{searchText:function(e){var t=this;e=e.trim(),this.option.list.forEach(function(a){if(""!==e){var i=(a[t.option.labelName||"label"]+"").trim();a._hidden=!~i.indexOf(e)}else a._hidden=!1})},option:function(){this.init()}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{attrs:{width:"300"}},[a("div",{staticClass:"multi-select-wrap"},[a("div",{staticClass:"header"},[a("el-checkbox",{staticStyle:{"margin-left":"5px"},attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("\n        全选\n      ")]),e._v(" "),a("el-input",{attrs:{size:"mini",placeholder:"搜索","prefix-icon":"el-icon-search"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),e._v(" "),e.option.list&&e.option.list.length?a("div",{staticClass:"body"},[a("el-checkbox-group",{on:{change:function(t){e.selectChange(t)}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.option.list,function(t){return t._hidden?e._e():a("el-checkbox",{key:t.value,attrs:{disabled:t._disabled,label:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])}))],1):e._e(),e._v(" "),a("div",{staticClass:"footer"},[a("el-button",{staticStyle:{padding:"4px"},attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){e.ensure()}}},[e._v("确定")])],1)]),e._v(" "),a("el-button",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[e._v(e._s(e.title))])],1)},staticRenderFns:[]};var s=a("Z0/y")(i,n,!1,function(e){a("LA7m")},"data-v-ff07bf54",null);t.default=s.exports},FMMj:function(e,t){},HBSQ:function(e,t){},Hao4:function(e,t){},InUs:function(e,t){},Iqbt:function(e,t){},Ixyp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"NoPermission",data:function(){return{}},mounted:function(){},props:{type:{type:Number,default:1},redirectTo:{type:String,default:"/"}},methods:{}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"exception-page"},[this._m(0),this._v(" "),t("div",{staticClass:"right"},[t("h1",{staticClass:"item"},[this._v("403")]),this._v(" "),t("p",{staticClass:"item"},[this._v("抱歉，你无权访问该页面")]),this._v(" "),t("div",{staticClass:"item"},[t("el-button",{attrs:{type:"primary"}},[t("router-link",{attrs:{to:{path:"/"}}},[this._v("返回首页")])],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"left"},[t("img",{attrs:{src:a("fL4K")}})])}]};var s=a("Z0/y")(i,n,!1,function(e){a("XzT+")},"data-v-74c7bf66",null);t.default=s.exports},J6OD:function(e,t){},Kl35:function(e,t){},LA7m:function(e,t){},LAjD:function(e,t){},LIF0:function(e,t){},LPfq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("4YfN"),n=a.n(i),s=a("hRKE"),l=a.n(s),o={name:"AppOptions",data:function(){return{}},props:{options:{type:Array,default:function(){return[]}}},created:function(){this.init()},methods:{selectChange:function(e,t,a,i){this.$emit("optionsSelectedChange",{value:e,index:t,option:a,options:i})},formatList:function(e,t,a){return e&&e.length&&Array.isArray(e)?e.map(function(e){return{label:e[t],value:e[a]}}):[]},init:function(){var e=this,t=this.getSyncCount(),a=0;0===t&&this.$emit("optionsReady",this.options),this.options.forEach(function(i){if(i.query&&"object"===l()(i.query)){var n=i.query.url,s=i.query.params;e.$http.get(n,s||{},!1).then(function(n){var s=e.formatList(n.data,i.labelName||"label",i.valueName||"value");e.$set(i,"list",s),i.sync&&++a===t&&e.$emit("optionsReady",e.options)})}})},cascadeItemChange:function(e){var t=e.value,a=e.index,i=e.option,n=e.options;this.$emit("cascadeItemChange",{value:t,index:a,option:i,options:n})},getSyncCount:function(){return this.options.filter(function(e){return e.sync}).length}},watch:{},computed:{listeners:function(){return n()({},this.$listeners)}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.options.length?a("div",{staticClass:"app-options-bar"},e._l(e.options,function(t,i){return a("div",{key:i,staticClass:"option"},["dropdown"===t.type?[a("AppDropdownSelect",{attrs:{option:t},on:{dropdownSelectChange:function(a){e.selectChange(a,i,t,e.options)}}})]:e._e(),e._v(" "),"cascade"===t.type?[a("AppCascadeSelect",{attrs:{option:t},on:{cascadeSelectChange:function(a){e.selectChange(a,i,t,e.options)},cascadeItemChange:function(a){e.cascadeItemChange(a,i,t,e.options)}}})]:e._e(),e._v(" "),"singleSelect"===t.type?[a("AppSingleSelect",{attrs:{option:t},on:{singleSelectChange:function(a){e.selectChange(a,i,t,e.options)}}})]:e._e(),e._v(" "),"multiSelect"===t.type?[a("AppMultiSelect",{attrs:{option:t},on:{multiSelectChange:function(a){e.selectChange(a,i,t,e.options)}}})]:e._e()],2)})):e._e()},staticRenderFns:[]};var u=a("Z0/y")(o,r,!1,function(e){a("WlE3")},"data-v-a23b76f4",null);t.default=u.exports},LfZl:function(e,t){},"MvJ+":function(e,t){},NDQW:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("rVsN"),n=a.n(i),s=(a("4Zrh"),a("LfZl"),a("0am7")),l=a.n(s),o=(a("J6OD"),a("J0RJ")),r=a.n(o),u=(a("NDQW"),a("1dH3")),c=a.n(u),d=(a("VgaO"),a("bVAy")),p=a.n(d),f=(a("7LVX"),a("9cGn")),h=a.n(f),m=(a("iAhg"),a("bBbA")),b=a.n(m),v=(a("UIhx"),a("dB/W")),_=a.n(v),g=(a("dZio"),a("acQ2")),y=a.n(g),k=(a("A4dg"),a("2KmJ")),C=a.n(k),w=(a("tUpD"),a("gtnd")),D=a.n(w),x=(a("TIcQ"),a("r7N4")),A=a.n(x),S=(a("hujf"),a("J+36")),R=a.n(S),z=(a("URxL"),a("RtCo")),E=a.n(z),L=(a("vRz6"),a("azzP")),M=a.n(L),P=(a("Hao4"),a("J7gB")),I=a.n(P),T=(a("r6BI"),a("gbxi")),F=a.n(T),N=(a("Vjrc"),a("tRzz")),O=a.n(N),j=(a("tMTd"),a("5Vq6")),q=a.n(j),B=(a("f45f"),a("Y7d7")),V=a.n(B),Z=(a("2E+P"),a("ICf/")),H=a.n(Z),U=(a("ubY8"),a("qE74")),W=a.n(U),Y=(a("YrjH"),a("h64J")),J=a.n(Y),Q=(a("2yYA"),a("wiyB")),X=a.n(Q),K=(a("n29k"),a("PTRu")),G=a.n(K),ee=(a("YGXr"),a("5Lzh")),te=a.n(ee),ae=(a("Iqbt"),a("meAt")),ie=a.n(ae),ne=(a("qdpj"),a("Kxk2")),se=a.n(ne),le=(a("6Dkw"),a("ePE/")),oe=a.n(le),re=a("MVMM"),ue={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var ce,de=a("Z0/y")({name:"App",created:function(){}},ue,!1,function(e){a("mst2")},null,null).exports,pe=a("9rMa"),fe=a("a3Yh"),he=a.n(fe),me=(ce={},he()(ce,"SET_USER_MSG",function(e,t){e.userMsg=t}),he()(ce,"CLEAR_USER_MSG",function(e,t){e.userMsg=t}),he()(ce,"SET_GLOBAL_HEADER",function(e,t){e.globalHeader=t}),ce),be={setUserMsg:function(e,t){var a=e.commit;e.state,e.rootState;a("SET_USER_MSG",t)},clearUserMsg:function(e){var t=e.commit;e.state,e.rootState;t("CLEAR_USER_MSG",{})},setGlobalHeader:function(e,t){var a=e.commit;e.state,e.rootState;a("SET_GLOBAL_HEADER",t)}};re.default.use(pe.a);var ve=new pe.a.Store({state:{userMsg:{},globalHeader:[]},mutations:me,actions:be,getters:{userMsg:function(e){return e.userMsg},globalHeader:function(e){return e.globalHeader}}}),_e=a("Lkmf"),ge=a.n(_e),ye=a("TLti"),ke=a.n(ye),Ce=a("4Xi4"),we=a.n(Ce),De=a("ZLEe"),xe=a.n(De);function Ae(e){return!/^[0-9]|[^a-zA-Z0-9_]/g.test(e)}var $e=a("zO6J"),Se=a("4YfN"),Re=a.n(Se),ze={name:"AppSidebar",data:function(){return{routesConfig:Tt,defaultOpens:[]}},props:["isCollapse"],components:{},mounted:function(){},methods:{toggleCollapse:function(){this.$emit("update:isCollapse",!this.isCollapse)},isActive:function(e){return this.$route.matched.some(function(t){return t.path===e})}},computed:Re()({},Object(pe.c)(["userMsg"]),{getDefaultOpens:function(){return this.$route.matched.map(function(e){return e.path})}})},Ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-sidebar"},[a("h3",{staticClass:"header"},[a("span",{staticClass:"logo"},[e._v(e._s(e.isCollapse?"ETL":""))]),e._v(" "),e.isCollapse?e._e():a("span",{staticClass:"text"},[e._v("ETL管理系统")])]),e._v(" "),a("AppMenu",{attrs:{collapse:e.isCollapse,menus:e.routesConfig,licenseKey:e.userMsg.role_id}}),e._v(" "),a("footer",{staticClass:"footer",on:{click:function(t){e.toggleCollapse()}}},[a("span",{staticClass:"fa fa-angle-double-left",class:e.isCollapse?"fa-angle-double-right":"fa-angle-double-left"})])],1)},staticRenderFns:[]};var Le=a("Z0/y")(ze,Ee,!1,function(e){a("InUs")},"data-v-91ab7f68",null).exports,Me="http://etl-server.oa.com/",Pe="http://sso.oa.com/Index/login/appid/1859",Ie={name:"AppHeader",data:function(){return{}},props:{tabList:{type:Array,default:function(){return[]}},activeIndex:{type:String,default:"0"}},components:{},created:function(){},mounted:function(){},methods:Re()({},Object(pe.b)(["clearUserMsg"]),{handleSelect:function(e){this.$emit("onHeaderTabChange",e)},logout:function(){this.clearUserMsg(),this.$http.get("user/logout/").then(function(e){window.location.href=Pe})}}),computed:Re()({},Object(pe.c)(["userMsg"]))},Te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-header"},[a("el-menu",{staticClass:"header-menu",attrs:{"default-active":e.$route.name,router:!0,"active-text-color":"#E6A23C",mode:"horizontal"},on:{select:e.handleSelect}},e._l(e.tabList,function(t,i){return t.hidden||t.permission&&!t.permission.includes(e.userMsg.role_id)?e._e():a("el-menu-item",{key:i,attrs:{index:t.name,route:{path:t.path},disabled:t.disabled}},[e._v(e._s(t.label))])})),e._v(" "),a("div",{staticClass:"header-user"},[a("span",{staticClass:"username"},[e._v(e._s(e.userMsg.user_cname))]),e._v(" "),a("span",{staticClass:"logout fa fa-sign-out",attrs:{title:"退出登录"},on:{click:function(t){e.logout()}}})])],1)},staticRenderFns:[]};var Fe={name:"AppMain",data:function(){return{isCollapse:window.innerWidth<960,topNavList:[]}},props:[],components:{AppSidebar:Le,AppHeader:a("Z0/y")(Ie,Te,!1,function(e){a("epZD")},"data-v-d4cbe872",null).exports},mounted:function(){var e=this;window.addEventListener("resize",function(t){e.isCollapse=window.innerWidth<960})},created:function(){},computed:Re()({},Object(pe.c)(["globalHeader"]),{rightWidthClass:function(){return this.isCollapse?"right-collapse-width":"right-width"},leftWidthClass:function(){return this.isCollapse?"sidebar-collapse-width":"sidebar-width"}}),methods:{}},Ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-main"},[a("div",{staticClass:"app-main-left",class:e.leftWidthClass},[a("AppSidebar",{attrs:{isCollapse:e.isCollapse},on:{"update:isCollapse":function(t){e.isCollapse=t}}})],1),e._v(" "),a("div",{staticClass:"app-main-right",class:e.rightWidthClass},[a("div",{staticClass:"header"},[a("AppHeader",{attrs:{tabList:e.globalHeader}})],1),e._v(" "),a("div",{staticClass:"body"},[a("router-view")],1)])])},staticRenderFns:[]};var Oe=a("Z0/y")(Fe,Ne,!1,function(e){a("tlXv")},"data-v-af630bd8",null).exports,je=a("3cXf"),qe=a.n(je),Be=a("lC5x"),Ve=a.n(Be),Ze=a("J0Oq"),He=a.n(Ze),Ue={name:"AddApi",data:function(){return{dialogVisible:!1,rules:{api:[{required:!0,trigger:"blur",validator:function(e,t,a){return t?Ae(t)?void a():a(new Error("仅支持字母、数字和下划线且不能以数字开头")):a(new Error("请输入接口名称"))}}],api_desc:[{required:!0,message:"请输入接口中文注释",trigger:"blur"}],api_table_desc:[{required:!0,message:"请输入原始数据表说明",trigger:"blur"}],api_data_type:[{required:!0,message:"请选择api数据类型",trigger:"change"}],api_flume_template:[{required:!0,message:"请选择api接口数据量",trigger:"change"}]}}},props:["visible","data","mode"],methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.save()})},save:function(){var e={api:this.data.api,api_desc:this.data.api_desc,api_table:this.data.api,api_table_desc:this.data.api_table_desc,api_data_type:this.data.api_data_type,api_flume_template:this.data.api_flume_template};"add"===this.mode?e.bid=this.data.bid:e.api_id=this.data.id,this.sendRequest(e)},sendRequest:function(e){var t=this,a="add"===this.mode?"api/add/":"api/update/";this.$http.post(a,e).then(function(e){t.$emit("confirm"),t.close()})},open:function(){this.dialogVisible=!0},close:function(){this.dialogVisible=!1,this.resetForm("interface-add-form")},resetForm:function(e){this.$refs[e].resetFields()}}},We={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"custom-class":"interface-add-api-dialog",title:"add"===e.mode?"新增接口":"编辑",visible:e.dialogVisible,"close-on-click-modal":!1,"before-close":e.close,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialog-body"},[a("el-form",{ref:"interface-add-form",attrs:{model:e.data,"label-width":"150px",size:"small",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接口名称",prop:"api"}},[a("el-input",{attrs:{placeholder:"接口名称"},model:{value:e.data.api,callback:function(t){e.$set(e.data,"api",t)},expression:"data.api"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接口中文注释",prop:"api_desc"}},[a("el-input",{attrs:{placeholder:"接口中文注释"},model:{value:e.data.api_desc,callback:function(t){e.$set(e.data,"api_desc",t)},expression:"data.api_desc"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"原始数据表",prop:"api"}},[a("el-input",{attrs:{placeholder:"原始表名称",disabled:""},model:{value:e.data.api,callback:function(t){e.$set(e.data,"api",t)},expression:"data.api"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"原始数据表说明",prop:"api_table_desc"}},[a("el-input",{attrs:{placeholder:"原始表说明"},model:{value:e.data.api_table_desc,callback:function(t){e.$set(e.data,"api_table_desc",t)},expression:"data.api_table_desc"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"api数据类型",prop:"api_data_type"}},[a("el-radio-group",{model:{value:e.data.api_data_type,callback:function(t){e.$set(e.data,"api_data_type",t)},expression:"data.api_data_type"}},[a("el-radio-button",{attrs:{label:"csv"}},[e._v("hive")]),e._v(" "),a("el-radio-button",{attrs:{label:"avro"}},[e._v("kudo")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"api接口数据量",prop:"api_flume_template"}},[a("el-radio-group",{model:{value:e.data.api_flume_template,callback:function(t){e.$set(e.data,"api_flume_template",t)},expression:"data.api_flume_template"}},[a("el-radio-button",{attrs:{label:"small"}}),e._v(" "),a("el-radio-button",{attrs:{label:"medium"}}),e._v(" "),a("el-radio-button",{attrs:{label:"big"}})],1)],1)],1)],1),e._v(" "),"edit"===e.mode?[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态"}},[a("span",{staticClass:"value"},[e._v(e._s(e.data.status_name))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"创建者"}},[a("span",{staticClass:"value"},[e._v(e._s(e.data.creater_user_info))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"最后修改者"}},[a("span",{staticClass:"value"},[e._v(e._s(e.data.updater_user_info))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上次修改时间"}},[a("span",{staticClass:"value"},[e._v(e._s(e.data.updated_time))])])],1)],1)]:e._e()],2)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.close()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("interface-add-form")}}},[e._v("保 存")])],1)])},staticRenderFns:[]};var Ye=a("Z0/y")(Ue,We,!1,function(e){a("ojmu")},"data-v-648352ce",null).exports,Je=a("HzJ8"),Qe=a.n(Je),Xe=a("IHPB"),Ke=a.n(Xe),Ge=a("19nM"),et={name:"AddConfigDialog",data:function(){return{dialogVisible:!1,loading:!1,tableColumns:[{label:"字段名称",field:"field_name",width:100},{label:"字段默认值",field:"field_default_value",width:100},{label:"表字段类型",field:"field_type",width:120},{label:"主键",field:"field_is_primary_key",width:100},{label:"接口字段类型",field:"field_api_type",width:120},{label:"字段说明",field:"field_desc",width:120},{label:"是否为空",field:"field_isnull",width:100},{label:"操作",field:"operate",width:120}],data:[],newParamsData:[],typeOptions:[{label:"int",value:"int"},{label:"bigint",value:"bigint"},{label:"float",value:"float"},{label:"string",value:"string"},{label:"datetime",value:"datetime"}],apiTypeOptions:[{label:"int",value:"int"},{label:"bigint",value:"bigint"},{label:"float",value:"float"},{label:"string",value:"string"},{label:"datetime",value:"datetime"}]}},props:["id","status"],components:{},created:function(){Object(Ge.a)(this.tableColumns,this.data)},mounted:function(){},methods:{getApiConfigFields:function(e){var t=this;this.loading=!0,this.$http.get("api/detail/",{api_id:e}).then(function(e){t.loading=!1;var a=[],i=[];(e.data.api_fields||[]).forEach(function(e){t.isStartMode?a.push(e):1===e.field_is_default?a.push(e):i.push(e)}),t.data=a,t.newParamsData=i})},open:function(){this.dialogVisible=!0},close:function(){this.dialogVisible=!1,this.loading=!1},sort:function(e,t){var a=this.newParamsData.indexOf(e);if("up"===t){var i;if(a-1<0)return;e=this.newParamsData.splice(a,1),(i=this.newParamsData).splice.apply(i,[a-1,0].concat(Ke()(e)))}else if("down"===t){var n;if(a+1>=this.newParamsData.length)return;e=this.newParamsData.splice(a,1),(n=this.newParamsData).splice.apply(n,[a+1,0].concat(Ke()(e)))}},save:function(){var e=this.paramsValidate();if("string"==typeof e)this.$notice.warning({title:"Warning",message:e});else if("boolean"==typeof e&&e){if(this.setSortFields(),!this.validateSort())return void this.$notice.warning({title:"Warning",message:"主键配置要在非主键配置之前"});this.sendRequest({api_id:this.id,api_fields:2===this.status?this.newParamsData:this.data.concat(this.newParamsData)})}},getMaxSortIndex:function(){return this.data.reduce(function(e,t){return t.field_sort>e&&(e=t.field_sort),e},1)},setSortFields:function(){var e=this.getMaxSortIndex();this.newParamsData.forEach(function(t,a){t.field_sort=a+e+1})},validateSort:function(){var e=1/0;return this.newParamsData.every(function(t){return 0===t.field_is_primary_key?(t.field_sort<e&&(e=t.field_sort),!0):1===t.field_is_primary_key?t.field_sort<e:void 0})},paramsValidate:function(){var e=!0,t=!1,a=void 0;try{for(var i,n=Qe()(this.newParamsData);!(e=(i=n.next()).done);e=!0){var s=i.value,l=s.field_name.trim(),o=s.field_default_value.trim(),r=s.field_desc.trim();if(!l)return this.$set(s,"_error",!0),"字段名称不能为空";if(!Ae(l))return this.$set(s,"_error",!0),"字段名称仅支持英文字母和下划线且不能以数字开头";if(!o)return this.$set(s,"_error",!0),"默认值不能为空";if(/[^a-zA-Z0-9.]/g.test(o))return this.$set(s,"_error",!0),"默认值仅支持字母数字和'.'";if(!r)return this.$set(s,"_error",!0),"字段说明不能为空"}}catch(e){t=!0,a=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw a}}return!0},sendRequest:function(e){var t=this;this.loading=!0;var a=2===this.status?"api/fields/running_update/":"api/fields/update/";this.$http.post(a,e).then(function(e){t.loading=!1,t.getApiConfigFields(t.id),t.newParamsData=[]})},getDefaultRow:function(){return{id:"",field_name:"",field_default_value:"",field_type:"string",field_desc:"",field_isnull:1,field_is_default:0,field_api_type:"string",field_is_primary_key:0}},addParams:function(){var e=this.getDefaultRow();this.newParamsData.push(e)},deleteParams:function(e){this.newParamsData.splice(e,1)}},computed:{isStartMode:function(){return 2===this.status}},watch:{dialogVisible:function(e){e&&this.getApiConfigFields(this.id)}}},tt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"custom-class":"interface-add-config-dialog",title:"接口配置",visible:e.dialogVisible,"close-on-click-modal":!1,"before-close":e.close,width:"70%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dialog-body"},[a("div",{staticClass:"tool-bar"},[a("el-button",{staticStyle:{"margin-left":"auto"},attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addParams()}}},[e._v("新增参数")])],1),e._v(" "),a("div",{staticClass:"table-container"},[a("table",[a("thead",[a("tr",e._l(e.tableColumns,function(t){return a("th",{key:t.field,style:{minWidth:t.width+"px"}},[e._v(e._s(t.label))])}))]),e._v(" "),a("tbody",{staticClass:"disabled-drag"},e._l(e.data,function(t){return a("tr",{key:t.id,staticStyle:{"border-bottom":"1px solid #e5e5e5",height:"40px"}},e._l(e.tableColumns,function(i){return a("td",{key:i.field},["field_is_primary_key"===i.field?[e._v("\n                "+e._s(e._f("statusFilters")(t.field_is_primary_key))+"\n              ")]:"field_isnull"===i.field?[e._v("\n               "+e._s(e._f("statusFilters")(t.field_isnull))+"\n              ")]:[e._v("\n                "+e._s(t[i.field])+"\n              ")]],2)}))})),e._v(" "),a("tbody",{staticClass:"container dragable"},e._l(e.newParamsData,function(t,i){return a("tr",{key:i,class:{"data-error":t._error}},[e._l(e.tableColumns,function(i){return["field_name"===i.field?a("td",{key:i.field},[a("el-input",{attrs:{placeholder:"字段名称",size:"mini"},model:{value:t[i.field],callback:function(a){e.$set(t,i.field,a)},expression:"row[columns['field']]"}})],1):e._e(),e._v(" "),"field_default_value"===i.field?a("td",{key:i.field},[a("el-input",{attrs:{placeholder:"字段默认值",size:"mini"},model:{value:t[i.field],callback:function(a){e.$set(t,i.field,a)},expression:"row[columns['field']]"}})],1):e._e(),e._v(" "),"field_type"===i.field?a("td",{key:i.field},[a("el-select",{attrs:{placeholder:"请选择类型",size:"mini"},model:{value:t[i.field],callback:function(a){e.$set(t,i.field,a)},expression:"row[columns['field']]"}},e._l(e.typeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),"field_api_type"===i.field?a("td",{key:i.field},[a("el-select",{attrs:{placeholder:"请选择类型",size:"mini"},model:{value:t[i.field],callback:function(a){e.$set(t,i.field,a)},expression:"row[columns['field']]"}},e._l(e.apiTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),"field_desc"===i.field?a("td",{key:i.field},[a("el-input",{attrs:{placeholder:"字段说明",size:"mini"},model:{value:t[i.field],callback:function(a){e.$set(t,i.field,a)},expression:"row[columns['field']]"}})],1):e._e(),e._v(" "),"field_isnull"===i.field?a("td",{key:i.field},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t[i.field],callback:function(a){e.$set(t,i.field,a)},expression:"row[columns['field']]"}},[a("el-radio-button",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio-button",{attrs:{label:0}},[e._v("否")])],1)],1):e._e(),e._v(" "),"field_is_primary_key"===i.field?a("td",{key:i.field},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t[i.field],callback:function(a){e.$set(t,i.field,a)},expression:"row[columns['field']]"}},[a("el-radio-button",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio-button",{attrs:{label:0}},[e._v("否")])],1)],1):e._e(),e._v(" "),"field_is_default"===i.field?a("td",{key:i.field},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t[i.field],callback:function(a){e.$set(t,i.field,a)},expression:"row[columns['field']]"}},[a("el-radio-button",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio-button",{attrs:{label:0}},[e._v("否")])],1)],1):e._e()]}),e._v(" "),a("td",[[a("el-button",{staticClass:"etl-btn mini",attrs:{type:"default",icon:"el-icon-arrow-down",title:"下移"},on:{click:function(a){e.sort(t,"down")}}}),e._v(" "),a("el-button",{staticClass:"etl-btn mini",attrs:{type:"default",icon:"el-icon-arrow-up",title:"上移"},on:{click:function(a){e.sort(t,"up")}}}),e._v(" "),a("el-button",{staticClass:"etl-btn mini",attrs:{type:"danger",icon:"el-icon-delete",title:"删除"},on:{click:function(t){e.deleteParams(i)}}})]],2)],2)}))])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.close()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("保 存")])],1)])},staticRenderFns:[]};var at={name:"Interface",data:function(){return{loading:!1,interface_name:"",interface_label:"",primary_table:"",data_type:"",primary_database:"",primary_database_label:"",options:[{type:"dropdown",labelName:"bname",valueName:"id",query:{url:"business/list/",params:{type:"my"}},sync:!0}],myBusinessList:[],tableColumns:[{label:"业务名称",field:"bname"},{label:"接口名称",field:"api"},{label:"接口中文注释",field:"api_desc"},{label:"接口创建人信息",field:"creater_user_info"},{label:"数据库表",field:"api_table"},{label:"数据库表注释",field:"api_table_desc"},{label:"api数据类型",field:"api_data_type"},{label:"api接口数据量",field:"api_flume_template"},{label:"状态名称",field:"status_name"},{label:"最后更新人",field:"updater_user_info"},{label:"操作",field:"operate",width:150,fixed:"right"}],APIList:[],bid:"",apiData:{bid:"",api:"",api_desc:"",api_table:"",api_table_desc:"",api_data_type:"",api_flume_template:""},currentRow:{},addApiDialogMode:"add"}},props:[],components:{AddApiDialog:Ye,AddConfigDialog:a("Z0/y")(et,tt,!1,function(e){a("LAjD")},"data-v-223b07ce",null).exports},mounted:function(){var e=this;return He()(Ve.a.mark(function t(){return Ve.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}))()},methods:{getAPIList:function(e){var t=this;this.loading=!0,this.$http.get("api/list/",{bid:e}).then(function(e){t.loading=!1,t.APIList=e.data})},optionsReady:function(e){this.bid=e[0].selected||e[0].list[0].value,this.apiData.bid=this.bid,this.getAPIList(this.bid)},openAddDialog:function(){var e=this;this.apiData={},xe()(this.apiData).forEach(function(t){e.apiData[t]=""}),this.addApiDialogMode="add",this.apiData.bid=this.bid,this.$refs.addApiDialog.open()},openConfigDialog:function(e){this.currentRow=e,this.$refs.configDialog.open()},change:function(e){var t=e.value,a=e.index;e.option,e.options;0===a&&(this.getAPIList(t),this.bid=t)},apiEdit:function(e){this.currentRow=e,this.apiData=JSON.parse(qe()(e)),this.addApiDialogMode="edit",this.$refs.addApiDialog.open()},toggle:function(e,t){var a=this;return He()(Ve.a.mark(function i(){var n;return Ve.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=0===e.status||1===e.status?2:0,a.currentRow=e,!t){i.next=9;break}return i.next=5,a.getApiConfigFields(e.id);case 5:if(i.sent.data.api_fields.length){i.next=9;break}return a.$notice.error({title:"Error",message:"参数配置不能为空"}),i.abrupt("return");case 9:a.$confirm("确定"+(t?"开启":"禁用")+"吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post("api/switch/status/",{api_id:e.id,status:n}).then(function(t){e.status=n})}).catch(function(){});case 10:case"end":return i.stop()}},i,a)}))()},getApiConfigFields:function(e){return this.$http.get("api/detail/",{api_id:e})}}},it={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"interface-query"},[a("AppTable",{attrs:{loading:e.loading,title:"接口查询",tableRows:20,tableColumns:e.tableColumns,tableData:e.APIList,options:e.options},on:{optionsReady:e.optionsReady,optionsSelectedChange:e.change},scopedSlots:e._u([{key:"operate",fn:function(t){return[a("el-button",{staticClass:"etl-btn mini",attrs:{type:"warning",icon:"el-icon-edit",title:"编辑",disabled:1!==t.row.status},on:{click:function(a){e.apiEdit(t.row)}}}),e._v(" "),a("el-button",{staticClass:"etl-btn mini",attrs:{type:"default",icon:"el-icon-setting",title:"配置",disabled:0===t.row.status},on:{click:function(a){e.openConfigDialog(t.row)}}}),e._v(" "),0===t.row.status||1===t.row.status?a("el-button",{staticClass:"etl-btn mini",attrs:{type:"success",icon:"el-icon-check",title:"启用"},on:{click:function(a){e.toggle(t.row,!0)}}}):e._e(),e._v(" "),2===t.row.status?a("el-button",{staticClass:"etl-btn mini",attrs:{type:"danger",icon:"el-icon-close",title:"禁用"},on:{click:function(a){e.toggle(t.row,!1)}}}):e._e()]}}])},[a("template",{slot:"custom-toolbar"},[a("el-button",{staticClass:"custom-toolbar-wrap",attrs:{type:"primary",size:"mini"},on:{click:function(t){e.openAddDialog()}}},[e._v("新增自定义接口")])],1)],2),e._v(" "),a("AddConfigDialog",{ref:"configDialog",attrs:{id:e.currentRow.id,status:e.currentRow.status}}),e._v(" "),a("AddApiDialog",{ref:"addApiDialog",attrs:{data:e.apiData,mode:e.addApiDialogMode},on:{confirm:function(t){e.getAPIList(e.bid)}}})],1)},staticRenderFns:[]};var nt=a("Z0/y")(at,it,!1,function(e){a("CXmb")},"data-v-45e98ff8",null).exports,st={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"database-page"},[a("AppTable",{attrs:{title:"数据库表配置",tableRows:20,tableColumns:e.tableColumns,tableData:e.tableData,hasEdit:!0},on:{onEdit:function(t){e.edit(t)}}})],1)},staticRenderFns:[]};var lt=a("Z0/y")({name:"Database",data:function(){return{tableColumns:[{label:"表类型",field:"type"},{label:"库名",field:"database_name"},{label:"数据表",field:"table_name"},{label:"表名",field:"table_label"},{label:"描述",field:"description"},{label:"权限等级",field:"weight"},{label:"是否可见",field:"visible"},{label:"操作",field:"operate",width:300}],tableData:[{type:"流水表",database_name:"1",table_name:"d",table_label:"D",description:"",weight:"0",visible:0},{type:"流水表",database_name:"2",table_name:"j",table_label:"J",description:"",weight:"1",visible:0},{type:"流水表",database_name:"3",table_name:"l",table_label:"L",description:"",weight:"2",visible:0}]}},props:[],components:{},methods:{edit:function(e){}}},st,!1,function(e){a("BnPR")},"data-v-2afa0f1a",null).exports,ot={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-auth-page"},[t("router-view")],1)},staticRenderFns:[]};var rt=a("Z0/y")({name:"Auth",data:function(){return{}},props:[]},ot,!1,function(e){a("FMMj")},"data-v-706c98b9",null).exports,ut=[{role_id:1,role_name:"普通用户"},{role_id:2,role_name:"业务管理人员"},{role_id:3,role_name:"业务配置人员"},{role_id:99,role_name:"管理人员",hidden:!0}],ct={name:"Apply",data:function(){return{businessId:void 0,reason:"",roleConfig:ut,businessList:[],myBusinessList:[],number:0}},props:[],components:{},mounted:function(){this.getBusinessList(),this.getMyBusinessList()},methods:{getBusinessList:function(){var e=this;this.$http.get("business/list/",{type:"auth"}).then(function(t){e.businessList=t.data})},getMyBusinessList:function(){var e=this;this.$http.get("business/list/",{type:"my"}).then(function(t){e.myBusinessList=t.data})},apply:function(){var e={bid:this.businessId,reason:this.reason},t=this.paramsValidate(e);if("string"==typeof t)return l.a.warning({title:"Warning",message:t}),!1;"boolean"==typeof t&&t&&this.sendRequest(e)},paramsValidate:function(e){var t=e.reason.trim();return void 0===e.bid?"请选择业务类型":!!t||"请填写申请理由"},sendRequest:function(e){this.$http.post("auth/apply/",e).then(function(e){})}},computed:Re()({},Object(pe.c)(["userMsg"]),{currentBusiness:function(){return this.myBusinessList.length?this.myBusinessList.map(function(e){return e.bname}).join("、"):"无"}})},dt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth-apply-page"},[a("el-card",{staticClass:"box-card"},[a("ul",{staticClass:"-etl-list-group"},[a("li",{staticClass:"list-item"},[a("span",{staticClass:"title"},[e._v("当前角色")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.userMsg.role_name))])]),e._v(" "),a("li",{staticClass:"list-item my-business"},[a("span",{staticClass:"title"},[e._v("当前业务")]),e._v(" "),a("div",{staticClass:"value"},[e._v("\n          "+e._s(e.currentBusiness)+"\n        ")])]),e._v(" "),a("li",{staticClass:"list-item"},[a("span",{staticClass:"title"},[e._v("申请业务")]),e._v(" "),a("div",{staticClass:"value"},[a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.businessId,callback:function(t){e.businessId=t},expression:"businessId"}},e._l(e.businessList,function(e){return a("el-option",{key:e.id,attrs:{label:e.bname,value:e.id}})}))],1)]),e._v(" "),a("li",{staticClass:"list-item"},[a("span",{staticClass:"title"},[e._v("申请理由")]),e._v(" "),a("div",{staticClass:"value",staticStyle:{flex:"0 0 193px"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入申请理由"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1)]),e._v(" "),a("li",{staticClass:"list-item"},[a("span",{staticClass:"title"}),e._v(" "),a("div",{staticClass:"value"},[a("el-button",{staticClass:"title",attrs:{type:"primary",size:"small",plain:""},on:{click:function(t){e.apply()}}},[e._v("申请")])],1)])])])],1)},staticRenderFns:[]};var pt=a("Z0/y")(ct,dt,!1,function(e){a("SoU0")},"data-v-24eef2dc",null).exports,ft={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("AppTable",{attrs:{title:"我的申请",tableRows:20,border:!0,tableColumns:e.tableColumns,tableData:e.myApplyList},scopedSlots:e._u([{key:"audit_info",fn:function(t){return[e._v("\n    "+e._s(2==t.row.status?t.row.audit_user_info:t.row.current_audit_user_info)+"\n  ")]}}])})},staticRenderFns:[]};var ht=a("Z0/y")({name:"MyApplication",data:function(){return{tableColumns:[{label:"业务id",field:"bid"},{label:"业务名称",field:"bname"},{label:"申请人",field:"user_info"},{label:"审核员",slotName:"audit_info"},{label:"申请原因",field:"reason"},{label:"申请时间",field:"create_time"},{label:"审核时间",field:"audit_time"},{label:"审核说明",field:"audit_remark"},{label:"审核状态",field:"status_name"}],myApplyList:[]}},props:[],mounted:function(){this.getApplyList()},methods:{getApplyList:function(){var e=this;this.$http.get("auth/my/apply/").then(function(t){e.myApplyList=t.data})}}},ft,!1,function(e){a("bsMX")},"data-v-72a1fbc5",null).exports,mt={name:"Check",data:function(){return{remark:"",dialogVisible:!1,currentRow:{},currentOp:"",tableColumns:[{label:"业务id",field:"bid"},{label:"业务名称",field:"bname"},{label:"申请人",field:"user_info"},{label:"申请原因",field:"reason"},{label:"申请时间",field:"create_time"},{label:"审核时间",field:"audit_time"},{label:"当前审核员",field:"current_audit_user_info"},{label:"最终审核员",field:"audit_user_info"},{label:"审核说明",field:"audit_remark"},{label:"审核状态",field:"status_name"},{label:"操作",field:"operate",width:100}],pendingList:[]}},props:[],components:{},mounted:function(){this.getPendingList()},methods:{getPendingList:function(){var e=this;this.$http.get("auth/my/audit/list/").then(function(t){e.pendingList=t.data})},operate:function(e,t){this.currentOp=e,this.currentRow=t,1===this.currentOp?this.pass():this.dialogVisible=!0},pass:function(){var e=this,t={apply_id:this.currentRow.id,operate:this.currentOp,remark:this.remark};this.$confirm("确定通过该条记录吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.sendRequest(t)}).catch(function(){})},reject:function(){var e={apply_id:this.currentRow.bid,operate:this.currentOp,remark:this.remark},t=this.paramsValidate(e);if("string"==typeof t)return this.$notice.warning({title:"Warning",message:t}),!1;"boolean"==typeof t&&t&&this.sendRequest(e)},sendRequest:function(e){var t=this;this.$http.post("auth/my/audit/op/",e).then(function(e){t.dialogVisible=!1,t.getPendingList()})},paramsValidate:function(e){return!!e.remark.trim()||"拒绝理由不能为空"}},destroyed:function(){}},bt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-auth-check"},[a("AppTable",{attrs:{title:"权限审批",tableRows:20,border:!0,tableColumns:e.tableColumns,tableData:e.pendingList},scopedSlots:e._u([{key:"operate",fn:function(t){return[a("el-button",{staticClass:"etl-btn mini",attrs:{type:"success",icon:"el-icon-check",title:"通过"},on:{click:function(a){e.operate(1,t.row)}}}),e._v(" "),a("el-button",{staticClass:"etl-btn mini",attrs:{type:"danger",icon:"el-icon-close",title:"拒绝"},on:{click:function(a){e.operate(0,t.row)}}})]}}])}),e._v(" "),a("el-dialog",{attrs:{title:"审核理由",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.reject()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var vt=a("Z0/y")(mt,bt,!1,function(e){a("ja61")},"data-v-813906e4",null).exports,_t={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auth-settings-page"},[a("AppTable",{attrs:{title:"用户列表",tableRows:20,border:!0,tableColumns:e.tableColumns,tableData:e.tableData,hasEdit:!0},on:{onEdit:function(t){e.edit(t)}}}),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialog-body"},[a("ul",{staticClass:"-etl-list-group"},[a("li",{staticClass:"list-item"},[a("span",{staticClass:"title"},[e._v("角色")]),e._v(" "),a("div",{staticClass:"value"},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},[a("el-radio-button",{attrs:{label:"1",border:""}},[e._v("管理员")]),e._v(" "),a("el-radio-button",{attrs:{label:"2",border:""}},[e._v("业务人员")]),e._v(" "),a("el-radio-button",{attrs:{label:"3",border:""}},[e._v("普通用户")])],1)],1)]),e._v(" "),a("li",{staticClass:"list-item"},[a("span",{staticClass:"title"},[e._v("已有业务")]),e._v(" "),a("div",{staticClass:"value"},[a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:e.studio,callback:function(t){e.studio=t},expression:"studio"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)])])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var gt=a("Z0/y")({name:"Settings",data:function(){return{tableColumns:[{label:"用户工号",field:"workid"},{label:"用户名",field:"user_cname"},{label:"用户英文名",field:"user_name"},{label:"角色名称",field:"role_name"}],tableData:[],dialogVisible:!1,currentRow:{},role:"",studio:"",options:[{value:"选项1",label:"双皮奶1"},{value:"选项2",label:"双皮奶2"},{value:"选项3",label:"双皮奶3"}]}},props:[],components:{},mounted:function(){this.getAdminList()},methods:{edit:function(e){this.currentRow=e,this.dialogVisible=!0},getAdminList:function(){var e=this;this.$http.get("user/admin/list/").then(function(t){e.tableData=t.data})}}},_t,!1,function(e){a("lZdj")},"data-v-3ebae282",null).exports,yt={name:"BusinessDetailsDialog",data:function(){var e=function(e,t,a){return t?function(e){return we()(+e)}(t)?void a():a(new Error("请输入整数")):a(new Error("必填"))},t=function(e,t,a){return t?function(e){return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}(t)?void a():a(new Error("请输入正确ip")):a(new Error("必填"))},a=function(e,t,a){return t?Ae(t)?void a():a(new Error("数据库名只能包含字母数字和下划线且不能以数字开头!")):a(new Error("必填"))};return{copyData:{},dialogVisible:!1,rules:{bname:[{required:!0,message:"请输入业务名称",trigger:"blur"}],bkafka_ip:[{required:!0,trigger:"blur",validator:t}],bkafka_port:[{required:!0,trigger:"blur",validator:e}],bkafka_user:[{required:!0,message:"请输入kafka连接用户名(hive)",trigger:"blur"}],bkafka_pkey:[{required:!0,message:"请输入kafka连接密钥(hive)",trigger:"blur"}],bkafka_ip_kudu:[{required:!0,trigger:"blur",validator:t}],bkafka_port_kudu:[{required:!0,trigger:"blur",validator:e}],bkafka_user_kudu:[{required:!0,message:"请输入kafka连接用户名(kudu)",trigger:"blur"}],bkafka_pkey_kudu:[{required:!0,message:"请输入kafka连接密钥(kudu)",trigger:"blur"}],bhive_db_name:[{required:!0,trigger:"blur",validator:a}],bhive_ip:[{required:!0,trigger:"blur",validator:t}],bhive_port:[{required:!0,trigger:"blur",validator:e}],bhive_user:[{required:!0,message:"请输入hive用户名",trigger:"blur"}],bhive_password:[{required:!0,message:"请输入hive登录密码",trigger:"blur"}],bimpala_db_name:[{required:!0,trigger:"blur",validator:a}],bimpala_ip:[{required:!0,trigger:"blur",validator:t}],bimpala_port:[{required:!0,trigger:"blur",validator:e}],bzk_host:[{required:!0,message:"请输入zookeeper集群地址",trigger:"blur"}],bzk_path:[{required:!0,message:"请输入zookeeper路径",trigger:"blur"}],bflume_endpoint:[{required:!0,message:"请输入hive表flume链接地址",trigger:"blur"}],bkafka_connector_endpoint:[{required:!0,message:"请输入kudo表kafaka connect链接地址",trigger:"blur"}],bkudu_master_host:[{required:!0,message:"请输入kudo master host",trigger:"blur"}],bmanager_workids:[{required:!0,message:"业务管理员不能为空",trigger:"change"}]}}},props:["data","mode"],components:{},mounted:function(){},methods:{initSelector:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];$("#etl-person-selector").uCheck("etl-person-selector",t,{size:8,callback:function(t){e.copyData.bmanager=t.join(","),e.copyData.bmanager_info=t.join(","),e.copyData.bmanager_workids=t.join(",")}})},open:function(){var e,t,a,i=this;e="http://tool.oa.com/api/?id=uCheck2",t=function(){i.dialogVisible=!0},(a=document.createElement("script")).type="text/javascript",a.async=!0,a.src=e,document.body.appendChild(a),a.onload=function(){"function"==typeof t&&t()}},close:function(){this.dialogVisible=!1,this.resetForm("business-details-form")},paramsValidate:function(){},sendRequest:function(){var e=this,t="add"===this.mode?"business/add/":"business/update/";"edit"===this.mode&&(this.copyData.bid=this.copyData.id,delete this.copyData.id),this.$http.post(t,this.copyData).then(function(t){e.close(),e.$emit("confirm")})},save:function(){var e=this;this.$refs["business-details-form"].validate(function(t){if(!t)return!1;e.sendRequest()})},resetForm:function(e){this.$refs[e].resetFields()}},watch:{dialogVisible:function(e){var t=this;e&&(this.copyData=JSON.parse(qe()(this.data)),this.$nextTick(function(){var e=t.copyData.bmanager_workids?t.copyData.bmanager_workids.split(","):[];t.initSelector(e)}))}}},kt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{"custom-class":"business-details-dialog",title:"业务详情","close-on-click-modal":!1,"before-close":e.close,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialog-body"},[a("el-form",{ref:"business-details-form",attrs:{model:e.copyData,"label-width":"180px",size:"mini",rules:e.rules}},[a("el-form-item",{attrs:{label:"业务名称",prop:"bname"}},[a("el-input",{attrs:{placeholder:"业务名称",size:"small"},model:{value:e.copyData.bname,callback:function(t){e.$set(e.copyData,"bname",t)},expression:"copyData.bname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"kafka连接ip(hive)",prop:"bkafka_ip"}},[a("el-input",{attrs:{placeholder:"kafka连接ip(hive)",size:"small"},model:{value:e.copyData.bkafka_ip,callback:function(t){e.$set(e.copyData,"bkafka_ip",t)},expression:"copyData.bkafka_ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"kafka连接端口(hive)",prop:"bkafka_port"}},[a("el-input",{attrs:{placeholder:"kafka连接端口(hive)",size:"small"},model:{value:e.copyData.bkafka_port,callback:function(t){e.$set(e.copyData,"bkafka_port",t)},expression:"copyData.bkafka_port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"kafka连接用户名(hive)",prop:"bkafka_user"}},[a("el-input",{attrs:{placeholder:"kafka连接用户名(hive)",size:"small"},model:{value:e.copyData.bkafka_user,callback:function(t){e.$set(e.copyData,"bkafka_user",t)},expression:"copyData.bkafka_user"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"kafka连接密钥(hive)",prop:"bkafka_pkey"}},[a("el-input",{attrs:{placeholder:"kafka连接密钥(hive)",size:"small",type:"textarea",autosize:{minRows:1,maxRows:4}},model:{value:e.copyData.bkafka_pkey,callback:function(t){e.$set(e.copyData,"bkafka_pkey",t)},expression:"copyData.bkafka_pkey"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"kafka连接ip(kudu)",prop:"bkafka_ip_kudu"}},[a("el-input",{attrs:{placeholder:"kafka连接ip(kudu)",size:"small"},model:{value:e.copyData.bkafka_ip_kudu,callback:function(t){e.$set(e.copyData,"bkafka_ip_kudu",t)},expression:"copyData.bkafka_ip_kudu"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"kafka连接端口(kudu)",prop:"bkafka_port_kudu"}},[a("el-input",{attrs:{placeholder:"kafka连接端口(kudu)",size:"small"},model:{value:e.copyData.bkafka_port_kudu,callback:function(t){e.$set(e.copyData,"bkafka_port_kudu",t)},expression:"copyData.bkafka_port_kudu"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"kafka连接用户名(kudu)",prop:"bkafka_user_kudu"}},[a("el-input",{attrs:{placeholder:"kafka连接用户名(kudu)",size:"small"},model:{value:e.copyData.bkafka_user_kudu,callback:function(t){e.$set(e.copyData,"bkafka_user_kudu",t)},expression:"copyData.bkafka_user_kudu"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"kafka连接密钥(kudu)",prop:"bkafka_pkey_kudu"}},[a("el-input",{attrs:{placeholder:"kafka连接密钥(kudu)",size:"small",type:"textarea",autosize:{minRows:1,maxRows:4}},model:{value:e.copyData.bkafka_pkey_kudu,callback:function(t){e.$set(e.copyData,"bkafka_pkey_kudu",t)},expression:"copyData.bkafka_pkey_kudu"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"hive数据库名",prop:"bhive_db_name"}},[a("el-input",{attrs:{placeholder:"hive数据库名",size:"small"},model:{value:e.copyData.bhive_db_name,callback:function(t){e.$set(e.copyData,"bhive_db_name",t)},expression:"copyData.bhive_db_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"hive连接ip",prop:"bhive_ip"}},[a("el-input",{attrs:{placeholder:"hive连接ip",size:"small"},model:{value:e.copyData.bhive_ip,callback:function(t){e.$set(e.copyData,"bhive_ip",t)},expression:"copyData.bhive_ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"hive连接端口",prop:"bhive_port"}},[a("el-input",{attrs:{placeholder:"hive连接端口",size:"small"},model:{value:e.copyData.bhive_port,callback:function(t){e.$set(e.copyData,"bhive_port",t)},expression:"copyData.bhive_port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"hive用户名",prop:"bhive_user"}},[a("el-input",{attrs:{placeholder:"hive用户名",size:"small"},model:{value:e.copyData.bhive_user,callback:function(t){e.$set(e.copyData,"bhive_user",t)},expression:"copyData.bhive_user"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"hive登录密码",prop:"bhive_password"}},[a("el-input",{attrs:{placeholder:"hive登录密码",size:"small"},model:{value:e.copyData.bhive_password,callback:function(t){e.$set(e.copyData,"bhive_password",t)},expression:"copyData.bhive_password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"impala数据库名",prop:"bimpala_db_name"}},[a("el-input",{attrs:{placeholder:"impala数据库名",size:"small"},model:{value:e.copyData.bimpala_db_name,callback:function(t){e.$set(e.copyData,"bimpala_db_name",t)},expression:"copyData.bimpala_db_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"impala连接ip",prop:"bimpala_ip"}},[a("el-input",{attrs:{placeholder:"impala连接ip",size:"small"},model:{value:e.copyData.bimpala_ip,callback:function(t){e.$set(e.copyData,"bimpala_ip",t)},expression:"copyData.bimpala_ip"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"impala端口",prop:"bimpala_port"}},[a("el-input",{attrs:{placeholder:"impala端口",size:"small"},model:{value:e.copyData.bimpala_port,callback:function(t){e.$set(e.copyData,"bimpala_port",t)},expression:"copyData.bimpala_port"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"zookeeper集群地址",prop:"bzk_host"}},[a("el-input",{attrs:{placeholder:"zookeeper集群地址",size:"small"},model:{value:e.copyData.bzk_host,callback:function(t){e.$set(e.copyData,"bzk_host",t)},expression:"copyData.bzk_host"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"zookeeper路径",prop:"bzk_path"}},[a("el-input",{attrs:{placeholder:"zookeeper路径",size:"small"},model:{value:e.copyData.bzk_path,callback:function(t){e.$set(e.copyData,"bzk_path",t)},expression:"copyData.bzk_path"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"hive表flume链接地址",prop:"bflume_endpoint"}},[a("el-input",{attrs:{placeholder:"hive表flume链接地址",size:"small"},model:{value:e.copyData.bflume_endpoint,callback:function(t){e.$set(e.copyData,"bflume_endpoint",t)},expression:"copyData.bflume_endpoint"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"kudo表kafaka connect链接地址",prop:"bkafka_connector_endpoint"}},[a("el-input",{attrs:{placeholder:"kudo表kafaka connect链接地址",size:"small"},model:{value:e.copyData.bkafka_connector_endpoint,callback:function(t){e.$set(e.copyData,"bkafka_connector_endpoint",t)},expression:"copyData.bkafka_connector_endpoint"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"kudo master host",prop:"bkudu_master_host"}},[a("el-input",{attrs:{placeholder:"kudo master host",size:"small"},model:{value:e.copyData.bkudu_master_host,callback:function(t){e.$set(e.copyData,"bkudu_master_host",t)},expression:"copyData.bkudu_master_host"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"业务管理员信息",prop:"bmanager_workids"}},[a("div",{attrs:{id:"etl-person-selector"}})])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.close()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("保 存")])],1)])},staticRenderFns:[]};var Ct={name:"business-list",data:function(){return{tableColumns:[{label:"业务名称",field:"bname"},{label:"kafka连接ip",field:"bkafka_ip"},{label:"kafka连接端口",field:"bkafka_port"},{label:"kafka连接用户名",field:"bkafka_user"},{label:"kafka连接密码",field:"bkafka_password"},{label:"hive连接ip",field:"bhive_ip"},{label:"hive连接端口",field:"bhive_port"},{label:"hive用户名",field:"bhive_user"},{label:"hive登录密码",field:"bhive_password"},{label:"hive库名称",field:"bhive_db_name"},{label:"impala连接ip",field:"bimpala_ip"},{label:"impala端口",field:"bimpala_port"},{label:"impala 用户",field:"bimpala_user"},{label:"impala 密码",field:"bimpala_password"},{label:"impala 库名称",field:"bimpala_db_name"},{label:"zookeeper集群地址",field:"bzk_host"},{label:"zookeeper路径",field:"bzk_path"},{label:"hive表flume链接地址",field:"bflume_endpoint"},{label:"kudo表kafaka connect链接地址",field:"bkudo_endpoint"},{label:"业务管理员信息",field:"bmanager_info"},{label:"业务状态",field:"bstatus"},{label:"操作",field:"operate",width:100,fixed:"right"}],tableData:[],currentRow:{},mode:"add",loading:!1}},props:[],components:{BusinessDetailsDialog:a("Z0/y")(yt,kt,!1,function(e){a("Kl35")},"data-v-61eea1e8",null).exports},mounted:function(){this.getBusinessList()},methods:{getBusinessList:function(){var e=this;this.loading=!0,this.$http.get("business/admin/list/").then(function(t){e.tableData=t.data,e.loading=!1})},openDetailsDialog:function(e){this.currentRow=e,this.mode="edit",this.$refs.detailsDialog.open()},addBusiness:function(){this.currentRow={},this.mode="add",this.$refs.detailsDialog.open()},del:function(e){return this.$http.post("business/delete/",e)},delBusiness:function(e){var t=this;this.currentRow=e,this.$confirm("是否删除该业务?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.del({bid:e.id}).then(function(e){t.getBusinessList()})}).catch(function(){})},confirm:function(){this.getBusinessList()}}},wt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"business-manage"},[a("AppTable",{attrs:{title:"业务列表",loading:e.loading,tableRows:20,border:!0,tableColumns:e.tableColumns,tableData:e.tableData},scopedSlots:e._u([{key:"operate",fn:function(t){return[a("el-button",{staticClass:"etl-btn mini",attrs:{type:"primary",icon:"el-icon-info",title:"详情"},on:{click:function(a){e.openDetailsDialog(t.row)}}}),e._v(" "),a("el-button",{staticClass:"etl-btn mini",attrs:{type:"danger",icon:"el-icon-delete",title:"删除"},on:{click:function(a){e.delBusiness(t.row)}}})]}}])},[a("template",{slot:"custom-toolbar"},[a("el-button",{staticClass:"custom-toolbar-wrap",attrs:{type:"primary",size:"mini"},on:{click:function(t){e.addBusiness()}}},[e._v("新增业务")])],1)],2),e._v(" "),a("BusinessDetailsDialog",{ref:"detailsDialog",attrs:{data:e.currentRow,mode:e.mode},on:{confirm:function(t){e.confirm()}}})],1)},staticRenderFns:[]};var Dt=a("Z0/y")(Ct,wt,!1,function(e){a("4rrD")},"data-v-0722b41a",null).exports,xt={data:function(){return{options:[{type:"dropdown",labelName:"bname",valueName:"id",query:{url:"business/list/",params:{type:"my"}},defaultSelectedIndex:1,sync:!0},{type:"multiSelect",defaultSelectedNumber:1,noLessThanNumber:1,labelName:"bname",valueName:"id",query:{url:"business/list/",params:{type:"my"}},sync:!0},{type:"singleSelected",selected:2,list:[{label:"选项一",value:0},{label:"选项二",value:1},{label:"选项三",value:2}]},{type:"cascade",selected:[1],list:[{value:"zhinan",label:"指南",children:[{value:"shejiyuanze",label:"设计原则",children:[{value:"yizhi",label:"一致"},{value:"fankui",label:"反馈"},{value:"xiaolv",label:"效率"},{value:"kekong",label:"可控"}]},{value:"daohang",label:"导航",children:[{value:"cexiangdaohang",label:"侧向导航"},{value:"dingbudaohang",label:"顶部导航"}]}]}]}],routesConfig:Tt}},mounted:function(){},components:{},methods:{change:function(e){console.log(e)},optionsReady:function(e){console.log(e)}}},At={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-plugins"},[t("AppOptions",{attrs:{options:this.options},on:{optionsSelectedChange:this.change,optionsReady:this.optionsReady}})],1)},staticRenderFns:[]},$t=a("Z0/y")(xt,At,!1,null,null,null).exports,St={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-examples-page"},[t("el-menu",{attrs:{"default-active":this.$route.path,mode:"horizontal",router:!0}},[t("el-menu-item",{attrs:{index:"/examples/app-options-eg"}},[this._v("AppOptions")]),this._v(" "),t("el-menu-item",{attrs:{index:"/examples/app-table-eg"}},[this._v("AppTable")]),this._v(" "),t("el-menu-item",{attrs:{index:"/examples/app-menu-eg"}},[this._v("AppMenu")])],1),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var Rt=a("Z0/y")({name:"Examples",data:function(){return{}},props:[],methods:{}},St,!1,function(e){a("YK3D")},"data-v-67a6dd19",null).exports,zt=a("QW0Y"),Et={name:"AppOptionsEg",data:function(){return{options:[{type:"dropdown",labelName:"bname",valueName:"id",query:{url:"business/list/",params:{type:"my"}},defaultSelectedIndex:1,sync:!0},{type:"multiSelect",defaultSelectedNumber:1,noLessThanNumber:1,labelName:"bname",valueName:"id",query:{url:"business/list/",params:{type:"my"}},sync:!0},{type:"singleSelected",selected:2,list:[{label:"选项一",value:0},{label:"选项二",value:1},{label:"选项三",value:2}]},{type:"cascade",selected:[1],list:[{value:"zhinan",label:"指南",children:[{value:"shejiyuanze",label:"设计原则",children:[{value:"yizhi",label:"一致"},{value:"fankui",label:"反馈"},{value:"xiaolv",label:"效率"},{value:"kekong",label:"可控"}]},{value:"daohang",label:"导航",children:[{value:"cexiangdaohang",label:"侧向导航"},{value:"dingbudaohang",label:"顶部导航"}]}]}]}]}},props:[],methods:{change:function(e){console.log(e)},optionsReady:function(e){console.log(e)}}},Lt={render:function(){var e=this.$createElement;return(this._self._c||e)("AppOptions",{attrs:{options:this.options},on:{optionsSelectedChange:this.change,optionsReady:this.optionsReady}})},staticRenderFns:[]};var Mt={name:"AppTableEg",data:function(){return{tableColumns:[{label:"表类型",field:"type"},{label:"库名",field:"database_name"},{label:"数据表",field:"table_name"},{label:"表名",field:"table_label"},{label:"描述",field:"description"},{label:"权限等级",field:"weight"},{label:"是否可见",field:"visible",formatter:function(e,t){return 0===e?"否":"是"}},{label:"操作",field:"operate",width:300}],tableData:[{type:"流水表",database_name:"1",table_name:"d",table_label:"D",description:"",weight:"0",visible:0},{type:"流水表",database_name:"2",table_name:"j",table_label:"J",description:"",weight:"1",visible:1},{type:"流水表",database_name:"3",table_name:"l",table_label:"L",description:"",weight:"2",visible:0}]}},props:[],methods:{edit:function(e){console.log(e)}}},Pt={render:function(){var e=this.$createElement;return(this._self._c||e)("AppTable",{attrs:{title:"数据库表配置",tableRows:20,tableColumns:this.tableColumns,tableData:this.tableData,hasEdit:!0},on:{onEdit:this.edit}})},staticRenderFns:[]};var It={render:function(){var e=this.$createElement;return(this._self._c||e)("AppMenu",{attrs:{menus:this.menu,licenseKey:99}})},staticRenderFns:[]};var Tt=[{path:"/interface",name:"Interface",icon:"fa-link",label:"接口查询",component:nt,permission:[2,3,99],beforeEnter:function(e,t,a){var i=ve.state.userMsg;[2,3,99].includes(i.role_id)?a():a({path:"/auth"})}},{path:"/database",name:"Database",icon:"fa-database",label:"数据库查询",permission:[],component:lt},{path:"/business",name:"Business",icon:"fa-briefcase",label:"业务管理",component:Dt,permission:[99],beforeEnter:function(e,t,a){var i=ve.state.userMsg;[99].includes(i.role_id)?a():a("/")}},{path:"/settings",name:"Settings",icon:"fa-users",label:"用户列表",component:gt,permission:[99],beforeEnter:function(e,t,a){var i=ve.state.userMsg;[99].includes(i.role_id)?a():a({path:"/auth"})}},{path:"/auth",icon:"fa-th-large",label:"权限管理",component:rt,childrenPosition:"top",children:[{path:"apply",name:"Apply",label:"权限申请",component:pt},{path:"myApplication",name:"myApplication",label:"我的申请",component:ht},{path:"check",name:"Check",label:"我的审核",component:vt,permission:[2,3,99],beforeEnter:function(e,t,a){var i=ve.state.userMsg;[2,3,99].includes(i.role_id)?a():a({path:"/auth"})}},{path:"",redirect:"apply",hidden:!0}]},{path:"/plugins",name:"Plugins",label:"插件",component:$t,hidden:!0},{path:"/examples",name:"Examples",label:"示例",component:Rt,hidden:!0,children:[{path:"app-options-eg",component:a("Z0/y")(Et,Lt,!1,function(e){a("eA/k")},"data-v-559f05de",null).exports},{path:"app-table-eg",component:a("Z0/y")(Mt,Pt,!1,function(e){a("ydG6")},"data-v-8c35f74e",null).exports},{path:"app-menu-eg",component:a("Z0/y")({name:"AppMenuEg",data:function(){return{menu:[{label:"选项一",path:"/1",permission:[1,2,3,99]},{label:"选项二",path:"/2",children:[{label:"字选项一",path:"sub/1"},{label:"字选项二",path:"sub/2"},{label:"字选项三",path:"sub/3"}]},{label:"选项三",path:"/3",hidden:!0},{label:"选项四",path:"/4",permission:[100]}]}},props:[],methods:{},computed:{}},It,!1,function(e){a("BHQ3")},"data-v-1d53eaba",null).exports},{path:"",redirect:"app-options-eg"}]},{path:"",redirect:"/auth",hidden:!0}],Ft=[{path:"/",component:Oe,children:Tt},{path:"**",component:zt.default}],Nt=a("z0pV");re.default.use($e.a);var Ot=new $e.a({mode:"history",routes:Ft});Ot.beforeEach(function(e,t,a){var i=e.fullPath.split("/");i.shift();var n=function(e,t){var a=0,i=Nt.join("/",t[a]),n=[];return function e(i,s){i.forEach(function(l){if(!l.hidden){var o=Nt.join("/",l.path);o===s&&Array.isArray(l.children)&&("top"!==l.childrenPosition?(i=l.children,a++,s=Nt.join("/",t[a]),e(i,s)):n=l.children)}})}(e,i),n}(Tt,i);ve.dispatch("setGlobalHeader",n),a()});var jt=Ot,qt=a("AA3o"),Bt=a.n(qt),Vt=a("xSur"),Zt=a.n(Vt),Ht=a("aozt"),Ut=a.n(Ht),Wt=a("E4C3"),Yt=a.n(Wt),Jt=0,Qt=-14;Ut.a.interceptors.request.use(function(e){return e.withCredentials=!0,Yt.a.start(),e},function(e){return n.a.reject(e)}),Ut.a.interceptors.response.use(function(e){return Yt.a.done(),200===e.status&&(e.data.error_code!==Jt?e.data.error_code===Qt&&(window.location.href=Pe):"post"===e.config.method&&l.a.success({title:"Success",message:"操作成功"})),e},function(e){return n.a.reject(e)});var Xt=new(function(){function e(){Bt()(this,e)}return Zt()(e,[{key:"get",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e=Me+e,new n.a(function(i,n){Ut.a.get(e,{params:t}).then(function(e){i(e.data)}).catch(function(e){a&&l.a.error({title:"Error",message:"服务器错误"}),n(e)})})}},{key:"post",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e=Me+e,"FormData"!==t.constructor.name&&(t=this.formatData(t)),new n.a(function(i,n){Ut.a.post(e,t,{headers:{"content-type":"application/x-www-form-urlencoded"}}).then(function(e){0!==e.data.error_code&&(a&&l.a.error({title:"Error",message:e.data.error_message}),n(e.data.error_message)),i(e.data)}).catch(function(e){a&&l.a.error({title:"Error",message:"服务器错误"}),n(e)})})}},{key:"formatData",value:function(e){var t=[];return xe()(e).forEach(function(a){var i=e[a],n=encodeURIComponent(a)+"="+encodeURIComponent(e[a]);Array.isArray(i)&&(n=encodeURIComponent(a)+"="+encodeURIComponent(qe()(e[a]))),t.push(n)}),t.join("&")}}]),e}()),Kt={install:function(e,t){e.http=Xt,e.filter("statusFilters",function(e){return e?"是":"否"}),e.prototype.$http=Xt}};a("Xcu2"),a("1CWy"),a("HBSQ"),a("ve9D");re.default.config.productionTip=!1,re.default.use(oe.a),re.default.use(se.a),re.default.use(ie.a),re.default.use(te.a),re.default.use(G.a),re.default.use(X.a),re.default.use(J.a),re.default.use(W.a),re.default.use(H.a),re.default.use(V.a),re.default.use(q.a),re.default.use(O.a),re.default.use(F.a),re.default.use(I.a),re.default.use(M.a),re.default.use(E.a),re.default.use(R.a),re.default.use(A.a),re.default.use(D.a),re.default.use(C.a),re.default.use(y.a),re.default.use(_.a),re.default.use(b.a),re.default.use(h.a),re.default.use(p.a),re.default.use(c.a.directive),re.default.prototype.$loading=c.a.service,re.default.prototype.$alert=r.a.alert,re.default.prototype.$confirm=r.a.confirm,re.default.prototype.$notice=l.a,re.default.use(Kt),jt.beforeEach(function(e,t,a){!function(e){if(xe.a)return xe()(e).length>0;for(var t in e)if(Object.hasOwnProperty(t))return!0;return!1}(ve.state.userMsg)?new n.a(function(e,t){re.default.http.get("user/info/").then(function(t){e(t.data)}).catch(function(e){t(e)})}).then(function(e){ve.dispatch("setUserMsg",e),a()}).catch(function(e){a(e)}):a()});var Gt=a("pAxv");Gt.keys().forEach(function(e){var t=Gt(e);e=/.+\/(.+)\./.exec(e)[1];var a=ge()(ke()(e));re.default.component(a,t.default||t)}),new re.default({el:"#app",store:ve,router:jt,components:{App:de},template:"<App/>"})},Q07a:function(e,t){},QW0Y:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"NotFound",data:function(){return{}},mounted:function(){},props:{type:{type:Number,default:1},redirectTo:{type:String,default:"/"}},methods:{}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"exception-page"},[this._m(0),this._v(" "),t("div",{staticClass:"right"},[t("h1",{staticClass:"item"},[this._v("404")]),this._v(" "),t("p",{staticClass:"item"},[this._v("抱歉，你访问的页面不存在")]),this._v(" "),t("div",{staticClass:"item"},[t("el-button",{attrs:{type:"primary"}},[t("router-link",{attrs:{to:{path:"/"}}},[this._v("返回首页")])],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"left"},[t("img",{attrs:{src:a("eB5y")}})])}]};var s=a("Z0/y")(i,n,!1,function(e){a("Q07a")},"data-v-16d158bc",null);t.default=s.exports},SoU0:function(e,t){},TIcQ:function(e,t){},TOK2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("4YfN"),n=a.n(i),s=a("19nM"),l={name:"AppTable",data:function(){return{currentPageData:[],computedTableData:[],total:this.tableData.length,searchText:"",noSearchFields:["operate"]}},props:{tableColumns:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},height:{type:Number},loading:{type:Boolean,default:!1},border:{type:Boolean,default:!0},title:{type:String,default:""},tableRows:{type:Number,default:10},formatterHandler:{type:Function},sortBy:{type:String|Array|Function},hasDetails:{type:Boolean,default:!1},hasEdit:{type:Boolean,default:!1},hasDelete:{type:Boolean,default:!1}},created:function(){Object(s.a)(this.tableColumns,this.tableData,{columnRedundancyWidth:60})},mounted:function(){this.setCurrentPageTableData(this.tableData,0,this.tableRows)},methods:{pageChange:function(e){var t=this.computedTableData,a=(e-1)*this.tableRows,i=e*this.tableRows;this.setCurrentPageTableData(t,a,i),this.$emit("onPageChange",e)},setCurrentPageTableData:function(e,t,a){this.currentPageData=e.slice(t,a)},details:function(e){this.$emit("onDetails",e)},edit:function(e){this.$emit("onEdit",e)},del:function(e){this.$emit("onDelete",e)},setIncludeColor:function(e){return e+="",""!==this.searchText.trim()&&!!~e.indexOf(this.searchText.trim())}},computed:{listeners:function(){return n()({},this.$listeners)}},watch:{searchText:function(e){var t=this;e=e.trim(),this.computedTableData=""===e?this.tableData:this.tableData.filter(function(a){return t.tableColumns.some(function(i){return!t.noSearchFields.includes(i.field)&&(!!a[i.field]&&!!~(a[i.field]+"").indexOf(e))})});var a=this.computedTableData;this.setCurrentPageTableData(a,0,this.tableRows)},tableData:function(e){this.setCurrentPageTableData(e,0,this.tableRows),this.computedTableData=e}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-table"},[a("div",{staticClass:"toolbar"},[a("span",{staticClass:"title"},[e._v(e._s(e.title))]),e._v(" "),a("AppOptions",e._g(e._b({},"AppOptions",e.$attrs,!1),e.listeners)),e._v(" "),a("el-input",{staticClass:"search",attrs:{placeholder:"请输入内容",size:"mini"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),e._v(" "),e._t("custom-toolbar")],2),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.currentPageData,sortable:!0,border:e.border,height:e.height,"header-cell-style":{background:"#EBEEF5",padding:"5px 0"}}},e._l(e.tableColumns,function(t){return a("el-table-column",{key:t.field,attrs:{fixed:t.fixed,prop:t.field,label:t.label,"min-width":t.width+"px","show-overflow-tooltip":!0,sortable:"operate"!==t.field,"sort-by":e.sortBy,"header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return["operate"===t.field?a("div",[e.hasDetails?a("el-button",{staticClass:"etl-btn mini",attrs:{type:"info",icon:"el-icon-message",title:"详情"},on:{click:function(t){e.details(i.row)}}}):e._e(),e._v(" "),e.hasEdit?a("el-button",{staticClass:"etl-btn mini",attrs:{type:"warning",icon:"el-icon-edit",title:"编辑"},on:{click:function(t){e.edit(i.row)}}}):e._e(),e._v(" "),e.hasDelete?a("el-button",{staticClass:"etl-btn mini",attrs:{type:"danger",icon:"el-icon-delete",title:"删除"},on:{click:function(t){e.del(i.row)}}}):e._e(),e._v(" "),e._t("operate",null,{row:i.row})],2):a("div",[t.slotName?[e._t(t.slotName,null,{row:i.row})]:t.formatter?[e._v("\n            "+e._s(t.formatter(i.row[t.field],i.row))+"\n          ")]:[a("span",{class:{"-include":e.setIncludeColor(i.row[t.field])}},[e._v(" "+e._s(i.row[t.field])+" ")])]],2)]}}])})})),e._v(" "),a("footer",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.tableRows,total:e.computedTableData.length},on:{"current-change":function(t){e.pageChange(t)}}})],1)],1)},staticRenderFns:[]};var r=a("Z0/y")(l,o,!1,function(e){a("LIF0")},"data-v-2abac738",null);t.default=r.exports},UIhx:function(e,t){},URxL:function(e,t){},VgaO:function(e,t){},Vjrc:function(e,t){},WlE3:function(e,t){},Xcu2:function(e,t){},"XzT+":function(e,t){},YGXr:function(e,t){},YK3D:function(e,t){},YrjH:function(e,t){},bsMX:function(e,t){},cAYY:function(e,t){},dZio:function(e,t){},"eA/k":function(e,t){},eB5y:function(e,t,a){e.exports=a.p+"static/img/no-page.9ed13bb.svg"},epZD:function(e,t){},f45f:function(e,t){},fL4K:function(e,t,a){e.exports=a.p+"static/img/no-permission.2dda86a.svg"},hujf:function(e,t){},iAhg:function(e,t){},ja61:function(e,t){},lZdj:function(e,t){},mU0R:function(e,t){},mst2:function(e,t){},muAc:function(e,t,a){e.exports=a.p+"static/img/server-error.990ae4d.svg"},n29k:function(e,t){},o3nh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"AppDropdownSelect",data:function(){return{selected:""}},props:{option:{default:{selected:""}}},created:function(){this.option.list&&Array.isArray(this.option.list)&&this.init()},methods:{init:function(){this.setDefaultSelected()},setDefaultSelected:function(){var e=this.option.selected;this.option.selected||(e=this.option.defaultSelectedIndex&&"number"==typeof this.option.defaultSelectedIndex&&this.option.defaultSelectedIndex<this.option.list.length?this.option.list[this.option.defaultSelectedIndex].value:this.option.list[0].value),this.option.selected=this.selected=e},selectChange:function(e){this.$emit("dropdownSelectChange",e)}},watch:{option:function(){this.init()}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:e.selectChange},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.option.list,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))},staticRenderFns:[]};var s=a("Z0/y")(i,n,!1,function(e){a("os1F")},"data-v-f38c2274",null);t.default=s.exports},ojmu:function(e,t){},os1F:function(e,t){},pAxv:function(e,t,a){var i={"./app-exception/NoPermission.vue":"Ixyp","./app-exception/NotFound.vue":"QW0Y","./app-exception/ServerError.vue":"0daQ","./app-menu/AppMenu.vue":"rmpJ","./app-menu/AppMenuItem.vue":"A05D","./app-options/AppCascadeSelect.vue":"4i6x","./app-options/AppDropdownSelect.vue":"o3nh","./app-options/AppMultiSelect.vue":"Dtqd","./app-options/AppOptions.vue":"LPfq","./app-options/AppSingleSelect.vue":"tjrc","./app-table/AppTable.vue":"TOK2"};function n(e){return a(s(e))}function s(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}n.keys=function(){return Object.keys(i)},n.resolve=s,e.exports=n,n.id="pAxv"},qdpj:function(e,t){},r6BI:function(e,t){},rmpJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"AppMenu",data:function(){return{}},props:{collapse:{type:Boolean,default:!1}},methods:{},computed:{getDefaultOpens:function(){return this.$route.matched.map(function(e){return e.path})}}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-menu",{staticClass:"app-menu",attrs:{router:!0,"collapse-transition":!1,"background-color":"#001529","text-color":"#a3b0bf","active-text-color":"#fff","default-openeds":this.getDefaultOpens,collapse:this.collapse}},[t("AppMenuItem",this._b({},"AppMenuItem",this.$attrs,!1))],1)},staticRenderFns:[]};var s=a("Z0/y")(i,n,!1,function(e){a("cAYY")},"data-v-39099f24",null);t.default=s.exports},tMME:function(e,t){},tMTd:function(e,t){},tUpD:function(e,t){},tjrc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"AppSingleSelect",data:function(){return{horizontalList:[],verticalList:[]}},props:["option"],created:function(){this.option.list&&Array.isArray(this.option.list)&&this.init()},methods:{init:function(){this.setDefaultSelected(),this.splitOptionList()},setDefaultSelected:function(){this.option.selected||(this.option.selected=this.option.list[0].value)},getItemByValue:function(e){var t=void 0,a=void 0;return this.option.list.some(function(i,n){return i.value===e&&(t=i,a=n,!0)}),{item:t,itemIndex:a}},splitOptionList:function(){var e=this.getItemByValue(this.option.selected).itemIndex;this.option.horizontalCount||"number"==typeof this.option.horizontalCount||this.option.horizontalCount<0?e<this.option.horizontalCount-1?this.option.horizontalCount<this.option.list.length&&(this.horizontalList=this.option.list.slice(0,this.option.horizontalCount),this.verticalList=this.option.list.slice(this.option.horizontalCount,this.option.list.length)):(this.horizontalList=this.option.list.slice(0,this.option.horizontalCount-1),this.horizontalList.push(this.option.list[e]),this.verticalList=this.option.list.slice(this.option.horizontalCount-1,this.option.list.length)):this.horizontalList=this.option.list.slice()},horizontalSelectChange:function(e){this.$emit("singleSelectChange",e)},verticalSelectChange:function(e,t){this.option.selected!==e&&(this.option.selected=e,this.horizontalList[this.horizontalList.length-1]=t,this.$emit("singleSelectChange",e))}},computed:{showVerticalSelect:function(){return!!this.option.horizontalCount&&this.option.list.length>this.option.horizontalCount}},watch:{option:function(){this.init()}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.option.list&&e.option.list.length?a("div",{staticClass:"single-select-wrap"},[a("el-radio-group",{attrs:{size:"mini"},on:{change:function(t){e.horizontalSelectChange(t)}},model:{value:e.option.selected,callback:function(t){e.$set(e.option,"selected",t)},expression:"option.selected"}},e._l(e.horizontalList,function(t){return a("el-radio-button",{key:e.option.valueName?t[e.option.valueName]:t.value,attrs:{label:e.option.valueName?t[e.option.valueName]:t.value}},[e._v("\n      "+e._s(e.option.labelName?t[e.option.labelName]:t.label)+"\n    ")])})),e._v(" "),a("el-popover",{attrs:{placement:"bottom-end","popper-class":"single-select-popover","visible-arrow":!1,value:!1,trigger:"click"}},[a("ul",{staticClass:"dropdown-wrap"},e._l(e.verticalList,function(t){return a("li",{key:e.option.valueName?t[e.option.valueName]:t.value,class:{"-active":e.option.selected===t[e.option.valueName||"value"]},on:{click:function(a){e.verticalSelectChange(t[e.option.valueName||"value"],t)}}},[e._v("\n        "+e._s(e.option.labelName?t[e.option.labelName]:t.label)+"\n      ")])})),e._v(" "),e.showVerticalSelect?a("div",{staticClass:"down-icon",attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"el-icon-caret-bottom"})]):e._e()])],1):e._e()},staticRenderFns:[]};var s=a("Z0/y")(i,n,!1,function(e){a("/5hn"),a("mU0R")},"data-v-5502f448",null);t.default=s.exports},tlXv:function(e,t){},uMSl:function(e,t){},ubY8:function(e,t){},vRz6:function(e,t){},ve9D:function(e,t){},ydG6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.197b37bf64e829af21d3.js.map