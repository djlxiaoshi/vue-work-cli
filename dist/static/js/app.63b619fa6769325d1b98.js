webpackJsonp([1],{"+Lha":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"MultiSelect",data:function(){return{searchText:"",checkAll:!1}},props:{option:{type:Object,default:function(){return{list:[],defaultSelectedNumber:1}}},title:{type:String,default:"数据筛选"}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.defaultSelected(),this.setCheckAll()},defaultSelected:function(){var t=this.option,e=t.valueName||"value",a=t.list&&Array.isArray(t.list)?t.list:[],i=t.selected;i&&Array.isArray(i)||(i=[],t.defaultSelectedNumber?i=a.reduce(function(a,i,n){return n<t.defaultSelectedNumber&&a.push(i[e]),a},[]):t.list&&t.list.length&&(i=[this.option.list[0][e]])),this.$set(this.option,"selected",i)},selectChange:function(t){this.setCheckAll(),this.$emit("multiSelectChange",t)},handleCheckAllChange:function(t){var e=[];if(t){var a=this.option.valueName||"value";e=this.option.list.map(function(t){return t[a]})}this.$set(this.option,"selected",e),this.setCheckAll()},setCheckAll:function(){if(!this.option.selected||!this.option.list)return!1;this.checkAll=this.option.selected.length===this.option.list.length}},computed:{isIndeterminate:function(){return this.option.selected.length>0&&this.option.selected.length<this.option.list.length}},watch:{searchText:function(t){var e=this;t=t.trim(),this.option.list.forEach(function(a){if(""!==t){var i=(a[e.option.labelName||"label"]+"").trim();a._hidden=!~i.indexOf(t)}else a._hidden=!1})},option:function(){this.init()}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-popover",{attrs:{width:"300"}},[a("div",{staticClass:"multi-select-wrap"},[a("div",{staticClass:"header"},[a("el-checkbox",{staticStyle:{"margin-left":"5px"},attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),t._v(" "),a("el-input",{attrs:{size:"mini",placeholder:"搜索","prefix-icon":"el-icon-search"},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1),t._v(" "),t.option.list&&t.option.list.length?a("div",{staticClass:"body"},[a("el-checkbox-group",{on:{change:function(e){t.selectChange(e)}},model:{value:t.option.selected,callback:function(e){t.$set(t.option,"selected",e)},expression:"option.selected"}},t._l(t.option.list,function(e){return e._hidden?t._e():a("el-checkbox",{key:t.option.valueName?e[t.option.valueName]:e.value,attrs:{label:t.option.valueName?e[t.option.valueName]:e.value}},[t._v("\n          "+t._s(t.option.labelName?e[t.option.labelName]:e.label)+"\n        ")])}))],1):t._e()]),t._v(" "),a("el-button",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[t._v(t._s(t.title))])],1)},staticRenderFns:[]};var s=a("Z0/y")(i,n,!1,function(t){a("L8kD")},"data-v-81ae37fe",null);e.default=s.exports},"/f9r":function(t,e){},"0Dkl":function(t,e){},"0daQ":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"ServerError",data:function(){return{}},mounted:function(){},props:{type:{type:Number,default:1},redirectTo:{type:String,default:"/"}},methods:{}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"exception-page"},[this._m(0),this._v(" "),e("div",{staticClass:"right"},[e("h1",{staticClass:"item"},[this._v("500")]),this._v(" "),e("p",{staticClass:"item"},[this._v("抱歉，服务器出错了")]),this._v(" "),e("div",{staticClass:"item"},[e("el-button",{attrs:{type:"primary"}},[e("router-link",{attrs:{to:{path:"/"}}},[this._v("刷新重试")])],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("img",{attrs:{src:a("muAc")}})])}]};var s=a("Z0/y")(i,n,!1,function(t){a("OqBu")},"data-v-3d773d50",null);e.default=s.exports},"1CWy":function(t,e){},"2E+P":function(t,e){},"2yYA":function(t,e){},"32oP":function(t,e){},"4Zrh":function(t,e){},"4v7W":function(t,e){},"6Dkw":function(t,e){},"7LVX":function(t,e){},"83Ih":function(t,e){},A05D:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("z0pV"),n={name:"AppMenuItem",data:function(){return{}},mounted:function(){},props:{menus:{type:Array,default:function(){return[]}},basePath:{type:String,default:""},licenseKey:{type:Number,default:3}},methods:{isActive:function(t){return this.$route.matched.some(function(e){return e.path===t})},getFullPath:function(t){return i.join(this.basePath,t)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-menu-item"},[t._l(t.menus,function(e){return[e.hidden||e.permission&&!e.permission.includes(t.licenseKey)?t._e():[e.children&&"top"!==e.childrenPosition?a("el-submenu",{key:e.path,staticClass:"el-submenu-title",class:{"is-active":t.isActive(t.getFullPath(e.path))},attrs:{index:e.path}},[a("template",{slot:"title"},[a("i",{staticClass:"fa icon",class:e.icon}),t._v(" "),a("span",{staticClass:"submenu-title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.label))])]),t._v(" "),e.children&&e.children.length?[a("AppMenuItem",{attrs:{menus:e.children,basePath:t.getFullPath(e.path)}})]:t._e()],2):a("el-menu-item",{key:t.basePath+"/"+e.path,class:{"is-active":t.isActive(t.getFullPath(e.path))},attrs:{index:t.getFullPath(e.path)}},[a("i",{staticClass:"fa icon",class:e.icon,attrs:{title:e.label}}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.label))])])]]})],2)},staticRenderFns:[]};var l=a("Z0/y")(n,s,!1,function(t){a("32oP")},"data-v-dd175140",null);e.default=l.exports},A4dg:function(t,e){},BSN6:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"AppTab",data:function(){return{currentTabName:""}},props:{tabList:{type:Array,default:function(){return[]}},activeTabName:{type:String,default:""}},watch:{activeTabName:function(t){this.currentTabName=t}},methods:{handleSelect:function(t){this.$emit("onTabChange",t)}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{staticClass:"app-tab",on:{"tab-click":t.handleSelect},model:{value:t.currentTabName,callback:function(e){t.currentTabName=e},expression:"currentTabName"}},t._l(t.tabList,function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.label,name:t.name}})}))},staticRenderFns:[]};var s=a("Z0/y")(i,n,!1,function(t){a("83Ih")},"data-v-c1480136",null);e.default=s.exports},BnPR:function(t,e){},BnU3:function(t,e){},Bznj:function(t,e){},GwYO:function(t,e){},HBSQ:function(t,e){},Hao4:function(t,e){},Hx8C:function(t,e){},Iqbt:function(t,e){},Ixyp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"NoPermission",data:function(){return{}},mounted:function(){},props:{type:{type:Number,default:1},redirectTo:{type:String,default:"/"}},methods:{}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"exception-page"},[this._m(0),this._v(" "),e("div",{staticClass:"right"},[e("h1",{staticClass:"item"},[this._v("403")]),this._v(" "),e("p",{staticClass:"item"},[this._v("抱歉，你无权访问该页面")]),this._v(" "),e("div",{staticClass:"item"},[e("el-button",{attrs:{type:"primary"}},[e("router-link",{attrs:{to:{path:"/"}}},[this._v("返回首页")])],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("img",{attrs:{src:a("fL4K")}})])}]};var s=a("Z0/y")(i,n,!1,function(t){a("cZtw")},"data-v-180ceefe",null);e.default=s.exports},J6OD:function(t,e){},JeIV:function(t,e){},L8kD:function(t,e){},LPfq:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("4YfN"),n=a.n(i),s=a("hRKE"),l=a.n(s),o={name:"AppOptions",data:function(){return{}},props:{options:{type:Array,default:function(){return[]}}},created:function(){this.init()},methods:{selectChange:function(t,e,a,i){this.$emit("optionsSelectedChange",{value:t,index:e,option:a,options:i})},setDefaultSelected:function(t){var e=t.valueName||"value",a=t.selected?t.selected:t.defaultSelectedIndex?t.list[t.defaultSelectedIndex][e]:t.list?t.list[0][e]:"";this.$set(t,"selected",a)},init:function(){var t=this,e=this.getSyncCount(),a=0;0===e&&this.$emit("optionsReady",this.options),this.options.forEach(function(i){if(t.setDefaultSelected(i),i.query&&"object"===l()(i.query)){var n=i.query.url,s=i.query.params;t.$http.get(n,s||{},!1).then(function(n){t.$set(i,"list",n.data),t.setDefaultSelected(i),i.sync&&++a===e&&t.$emit("optionsReady",t.options)})}})},cascadeItemChange:function(t){var e=t.value,a=t.index,i=t.option,n=t.options;this.$emit("cascadeItemChange",{value:e,index:a,option:i,options:n})},getSyncCount:function(){return this.options.filter(function(t){return t.sync}).length}},watch:{},computed:{listeners:function(){return n()({},this.$listeners)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.options.length?a("div",{staticClass:"app-options-bar"},t._l(t.options,function(e,i){return a("div",{key:i,staticClass:"option"},["dropdown"===e.type?[a("el-select",{attrs:{placeholder:"请选择",size:"mini",loading:e.loading},on:{change:function(a){t.selectChange(a,i,e,t.options)}},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"option.selected"}},t._l(e.list,function(t){return a("el-option",{key:e.valueName?t[e.valueName]:t.value,attrs:{label:e.labelName?t[e.labelName]:t.label,value:e.valueName?t[e.valueName]:t.value}})}))]:t._e(),t._v(" "),"cascade"===e.type?[a("el-cascader",{attrs:{size:"mini",options:e.list},on:{"active-item-change":function(a){t.cascadeItemChange(a,i,e,t.options)},change:function(a){t.selectChange(a,i,e,t.options)}},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"option.selected"}})]:t._e(),t._v(" "),"singleSelect"===e.type?[a("SingleSelect",{attrs:{option:e},on:{singleSelectChange:function(a){t.selectChange(a,i,e,t.options)}}})]:t._e(),t._v(" "),"multiSelect"===e.type?[a("MultiSelect",{attrs:{option:e},on:{multiSelectChange:function(a){t.selectChange(a,i,e,t.options)}}})]:t._e()],2)})):t._e()},staticRenderFns:[]};var c=a("Z0/y")(o,r,!1,function(t){a("sysB")},"data-v-370c43d5",null);e.default=c.exports},LfZl:function(t,e){},MOvJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.option.list&&t.option.list.length?a("div",{staticClass:"single-select-wrap"},[a("el-radio-group",{attrs:{size:"mini"},on:{change:function(e){t.horizontalSelectChange(e)}},model:{value:t.option.selected,callback:function(e){t.$set(t.option,"selected",e)},expression:"option.selected"}},t._l(t.horizontalList,function(e){return a("el-radio-button",{key:t.option.valueName?e[t.option.valueName]:e.value,attrs:{label:t.option.valueName?e[t.option.valueName]:e.value}},[t._v("\n      "+t._s(t.option.labelName?e[t.option.labelName]:e.label)+"\n    ")])})),t._v(" "),a("el-popover",{attrs:{placement:"bottom-end","popper-class":"single-select-popover","visible-arrow":!1,trigger:"click"}},[a("ul",{staticClass:"dropdown-wrap"},t._l(t.verticalList,function(e){return a("li",{key:t.option.valueName?e[t.option.valueName]:e.value,class:{"-active":t.option.selected===e[t.option.valueName||"value"]},on:{click:function(a){t.verticalSelectChange(e[t.option.valueName||"value"])}}},[t._v("\n        "+t._s(t.option.labelName?e[t.option.labelName]:e.label)+"\n      ")])})),t._v(" "),t.showVerticalSelect?a("div",{staticClass:"down-icon",attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"el-icon-caret-bottom"})]):t._e()])],1):t._e()},staticRenderFns:[]};var n=a("Z0/y")({name:"SingleSelect",data:function(){return{horizontalList:[],verticalList:[]}},props:["option"],created:function(){this.init()},methods:{init:function(){this.setDefaultSelected(),this.splitOptionList()},setDefaultSelected:function(){this.option.selected||(this.option.selected=this.option.list[0].value)},splitOptionList:function(){this.option.horizontalCount&&this.option.horizontalCount<this.option.list.length&&(this.horizontalList=this.option.list.slice(0,this.option.horizontalCount),this.verticalList=this.option.list.slice(this.option.horizontalCount,this.option.list.length))},horizontalSelectChange:function(t){this.$emit("singleSelectChange",t)},verticalSelectChange:function(t){this.option.selected!==t&&(this.option.selected=t,this.$emit("singleSelectChange",t))}},computed:{showVerticalSelect:function(){return!!this.option.horizontalCount&&this.option.list.length>this.option.horizontalCount}},watch:{option:function(t){this.init()}}},i,!1,function(t){a("0Dkl"),a("JeIV")},"data-v-8884bd1e",null);e.default=n.exports},MyZu:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this.$createElement;return(this._self._c||t)("h1",[this._v("dialog")])},staticRenderFns:[]};var n=a("Z0/y")({name:"AppDialog",data:function(){return{}},props:[],methods:{}},i,!1,function(t){a("GwYO")},"data-v-79f86eac",null);e.default=n.exports},NAO3:function(t,e){},NDQW:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("rVsN"),n=a.n(i),s=(a("4Zrh"),a("LfZl"),a("0am7")),l=a.n(s),o=(a("J6OD"),a("J0RJ")),r=a.n(o),c=(a("NDQW"),a("1dH3")),u=a.n(c),d=(a("VgaO"),a("bVAy")),p=a.n(d),f=(a("7LVX"),a("9cGn")),m=a.n(f),h=(a("iAhg"),a("bBbA")),b=a.n(h),v=(a("UIhx"),a("dB/W")),_=a.n(v),g=(a("dZio"),a("acQ2")),y=a.n(g),k=(a("A4dg"),a("2KmJ")),C=a.n(k),w=(a("tUpD"),a("gtnd")),D=a.n(w),x=(a("TIcQ"),a("r7N4")),A=a.n(x),R=(a("hujf"),a("J+36")),S=a.n(R),E=(a("URxL"),a("RtCo")),z=a.n(E),P=(a("vRz6"),a("azzP")),L=a.n(P),M=(a("Hao4"),a("J7gB")),N=a.n(M),T=(a("r6BI"),a("gbxi")),B=a.n(T),O=(a("Vjrc"),a("tRzz")),F=a.n(O),I=(a("tMTd"),a("5Vq6")),j=a.n(I),V=(a("f45f"),a("Y7d7")),q=a.n(V),Z=(a("2E+P"),a("ICf/")),H=a.n(Z),W=(a("ubY8"),a("qE74")),J=a.n(W),U=(a("YrjH"),a("h64J")),Y=a.n(U),G=(a("2yYA"),a("wiyB")),Q=a.n(G),K=(a("n29k"),a("PTRu")),X=a.n(K),tt=(a("YGXr"),a("5Lzh")),et=a.n(tt),at=(a("Iqbt"),a("meAt")),it=a.n(at),nt=(a("qdpj"),a("Kxk2")),st=a.n(nt),lt=(a("6Dkw"),a("ePE/")),ot=a.n(lt),rt=a("MVMM"),ct={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var ut,dt=a("Z0/y")({name:"App",created:function(){}},ct,!1,function(t){a("REP8")},null,null).exports,pt=a("9rMa"),ft=a("a3Yh"),mt=a.n(ft),ht=(ut={},mt()(ut,"SET_USER_MSG",function(t,e){t.userMsg=e}),mt()(ut,"CLEAR_USER_MSG",function(t,e){t.userMsg=e}),mt()(ut,"SET_GLOBAL_HEADER",function(t,e){t.globalHeader=e}),ut),bt={setUserMsg:function(t,e){var a=t.commit;t.state,t.rootState;a("SET_USER_MSG",e)},clearUserMsg:function(t){var e=t.commit;t.state,t.rootState;e("CLEAR_USER_MSG",{})},setGlobalHeader:function(t,e){var a=t.commit;t.state,t.rootState;a("SET_GLOBAL_HEADER",e)}};rt.default.use(pt.a);var vt=new pt.a.Store({state:{userMsg:{},globalHeader:[]},mutations:ht,actions:bt,getters:{userMsg:function(t){return t.userMsg},globalHeader:function(t){return t.globalHeader}}}),_t=a("Lkmf"),gt=a.n(_t),yt=a("TLti"),kt=a.n(yt),Ct=a("4Xi4"),wt=a.n(Ct),Dt=a("ZLEe"),xt=a.n(Dt);function $t(t){return!/^[0-9]|[^a-zA-Z0-9_]/g.test(t)}var At=a("zO6J"),Rt=a("4YfN"),St=a.n(Rt),Et={name:"AppSidebar",data:function(){return{routesConfig:Re,defaultOpens:[]}},props:["isCollapse"],components:{},mounted:function(){},methods:{toggleCollapse:function(){this.$emit("update:isCollapse",!this.isCollapse)},isActive:function(t){return this.$route.matched.some(function(e){return e.path===t})}},computed:St()({},Object(pt.c)(["userMsg"]),{getDefaultOpens:function(){return this.$route.matched.map(function(t){return t.path})}})},zt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-sidebar"},[a("h3",{staticClass:"header"},[a("span",{staticClass:"logo"},[t._v(t._s(t.isCollapse?"ETL":""))]),t._v(" "),t.isCollapse?t._e():a("span",{staticClass:"text"},[t._v("ETL管理系统")])]),t._v(" "),a("AppMenu",{attrs:{collapse:t.isCollapse,menus:t.routesConfig,licenseKey:t.userMsg.role_id}}),t._v(" "),a("footer",{staticClass:"footer",on:{click:function(e){t.toggleCollapse()}}},[a("span",{staticClass:"fa fa-angle-double-left",class:t.isCollapse?"fa-angle-double-right":"fa-angle-double-left"})])],1)},staticRenderFns:[]};var Pt=a("Z0/y")(Et,zt,!1,function(t){a("ftiv")},"data-v-6d7478e1",null).exports,Lt="http://sso.oa.com/Index/login/appid/1871",Mt={name:"AppHeader",data:function(){return{}},props:{tabList:{type:Array,default:function(){return[]}},activeIndex:{type:String,default:"0"}},components:{},created:function(){},mounted:function(){},methods:St()({},Object(pt.b)(["clearUserMsg"]),{handleSelect:function(t){this.$emit("onHeaderTabChange",t)},logout:function(){this.clearUserMsg(),this.$http.get("user/logout/").then(function(t){window.location.href=Lt})}}),computed:St()({},Object(pt.c)(["userMsg"]))},Nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-header"},[a("el-menu",{staticClass:"header-menu",attrs:{"default-active":t.$route.name,router:!0,"active-text-color":"#E6A23C",mode:"horizontal"},on:{select:t.handleSelect}},t._l(t.tabList,function(e,i){return e.hidden||e.permission&&!e.permission.includes(t.userMsg.role_id)?t._e():a("el-menu-item",{key:i,attrs:{index:e.name,route:{path:e.path},disabled:e.disabled}},[t._v(t._s(e.label))])})),t._v(" "),a("div",{staticClass:"header-user"},[a("span",{staticClass:"username"},[t._v(t._s(t.userMsg.user_cname))]),t._v(" "),a("span",{staticClass:"logout fa fa-sign-out",attrs:{title:"退出登录"},on:{click:function(e){t.logout()}}})])],1)},staticRenderFns:[]};var Tt={name:"AppMain",data:function(){return{isCollapse:window.innerWidth<960,topNavList:[]}},props:[],components:{AppSidebar:Pt,AppHeader:a("Z0/y")(Mt,Nt,!1,function(t){a("xWAK")},"data-v-55da7d06",null).exports},mounted:function(){var t=this;window.addEventListener("resize",function(e){t.isCollapse=window.innerWidth<960})},created:function(){},computed:St()({},Object(pt.c)(["globalHeader"]),{rightWidthClass:function(){return this.isCollapse?"right-collapse-width":"right-width"},leftWidthClass:function(){return this.isCollapse?"sidebar-collapse-width":"sidebar-width"}}),methods:{}},Bt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-main"},[a("div",{staticClass:"app-main-left",class:t.leftWidthClass},[a("AppSidebar",{attrs:{isCollapse:t.isCollapse},on:{"update:isCollapse":function(e){t.isCollapse=e}}})],1),t._v(" "),a("div",{staticClass:"app-main-right",class:t.rightWidthClass},[a("div",{staticClass:"header"},[a("AppHeader",{attrs:{tabList:t.globalHeader}})],1),t._v(" "),a("div",{staticClass:"body"},[a("router-view")],1)])])},staticRenderFns:[]};var Ot=a("Z0/y")(Tt,Bt,!1,function(t){a("eQ09")},"data-v-c5ba64b4",null).exports,Ft=a("3cXf"),It=a.n(Ft),jt=a("lC5x"),Vt=a.n(jt),qt=a("J0Oq"),Zt=a.n(qt),Ht={name:"AddApi",data:function(){return{dialogVisible:!1,rules:{api:[{trigger:"blur",validator:function(t,e,a){return e?$t(e)?void a():a(new Error("仅支持字母、数字和下划线且不能以数字开头")):a(new Error("请输入接口名称"))}}],api_desc:[{required:!0,message:"请输入接口中文注释",trigger:"blur"}],api_table_desc:[{required:!0,message:"请输入原始数据表说明",trigger:"blur"}],api_data_type:[{required:!0,message:"请选择api数据类型",trigger:"change"}],api_flume_template:[{required:!0,message:"请选择api接口数据量",trigger:"change"}]}}},props:["visible","data","mode"],methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.save()})},save:function(){var t={api:this.data.api,api_desc:this.data.api_desc,api_table:this.data.api,api_table_desc:this.data.api_table_desc,api_data_type:this.data.api_data_type,api_flume_template:this.data.api_flume_template};"add"===this.mode?t.bid=this.data.bid:t.api_id=this.data.id,this.sendRequest(t)},sendRequest:function(t){var e=this,a="add"===this.mode?"api/add/":"api/update/";this.$http.post(a,t).then(function(t){e.$emit("confirm"),e.close()})},open:function(){this.dialogVisible=!0},close:function(){this.dialogVisible=!1,this.resetForm("interface-add-form")},resetForm:function(t){this.$refs[t].resetFields()}}},Wt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{"custom-class":"interface-add-api-dialog",title:"add"===t.mode?"新增接口":"编辑",visible:t.dialogVisible,"close-on-click-modal":!1,"before-close":t.close,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"dialog-body"},[a("el-form",{ref:"interface-add-form",attrs:{model:t.data,"label-width":"150px",size:"small",rules:t.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接口名称",prop:"api"}},[a("el-input",{attrs:{placeholder:"接口名称"},model:{value:t.data.api,callback:function(e){t.$set(t.data,"api",e)},expression:"data.api"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接口中文注释",prop:"api_desc"}},[a("el-input",{attrs:{placeholder:"接口中文注释"},model:{value:t.data.api_desc,callback:function(e){t.$set(t.data,"api_desc",e)},expression:"data.api_desc"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"原始数据表",prop:"api"}},[a("el-input",{attrs:{placeholder:"原始表名称",disabled:""},model:{value:t.data.api,callback:function(e){t.$set(t.data,"api",e)},expression:"data.api"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"原始数据表说明",prop:"api_table_desc"}},[a("el-input",{attrs:{placeholder:"原始表说明"},model:{value:t.data.api_table_desc,callback:function(e){t.$set(t.data,"api_table_desc",e)},expression:"data.api_table_desc"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"api数据类型",prop:"api_data_type"}},[a("el-radio-group",{model:{value:t.data.api_data_type,callback:function(e){t.$set(t.data,"api_data_type",e)},expression:"data.api_data_type"}},[a("el-radio-button",{attrs:{label:"csv"}},[t._v("hive")]),t._v(" "),a("el-radio-button",{attrs:{label:"avro"}},[t._v("kudo")])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"api接口数据量",prop:"api_flume_template"}},[a("el-radio-group",{model:{value:t.data.api_flume_template,callback:function(e){t.$set(t.data,"api_flume_template",e)},expression:"data.api_flume_template"}},[a("el-radio-button",{attrs:{label:"small"}}),t._v(" "),a("el-radio-button",{attrs:{label:"medium"}}),t._v(" "),a("el-radio-button",{attrs:{label:"big"}})],1)],1)],1)],1),t._v(" "),"edit"===t.mode?[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态"}},[a("span",{staticClass:"value"},[t._v(t._s(t.data.status_name))])])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"创建者"}},[a("span",{staticClass:"value"},[t._v(t._s(t.data.creater_user_info))])])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"最后修改者"}},[a("span",{staticClass:"value"},[t._v(t._s(t.data.updater_user_info))])])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"上次修改时间"}},[a("span",{staticClass:"value"},[t._v(t._s(t.data.updated_time))])])],1)],1)]:t._e()],2)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.close()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("interface-add-form")}}},[t._v("保 存")])],1)])},staticRenderFns:[]};var Jt=a("Z0/y")(Ht,Wt,!1,function(t){a("4v7W")},"data-v-0b2cb80b",null).exports,Ut=a("HzJ8"),Yt=a.n(Ut),Gt=a("IHPB"),Qt=a.n(Gt),Kt=a("19nM"),Xt={name:"AddConfigDialog",data:function(){return{dialogVisible:!1,loading:!1,tableColumns:[{label:"字段名称",field:"field_name",width:100},{label:"字段默认值",field:"field_default_value",width:100},{label:"表字段类型",field:"field_type",width:120},{label:"主键",field:"field_is_primary_key",width:100},{label:"接口字段类型",field:"field_api_type",width:120},{label:"字段说明",field:"field_desc",width:120},{label:"是否为空",field:"field_isnull",width:100},{label:"操作",field:"operate",width:120}],data:[],newParamsData:[],typeOptions:[{label:"int",value:"int"},{label:"bigint",value:"bigint"},{label:"float",value:"float"},{label:"string",value:"string"},{label:"datetime",value:"datetime"}],apiTypeOptions:[{label:"int",value:"int"},{label:"bigint",value:"bigint"},{label:"float",value:"float"},{label:"string",value:"string"},{label:"datetime",value:"datetime"}]}},props:["id","status"],components:{},created:function(){Object(Kt.a)(this.tableColumns,this.data)},mounted:function(){},methods:{getApiConfigFields:function(t){var e=this;this.loading=!0,this.$http.get("api/detail/",{api_id:t}).then(function(t){e.loading=!1;var a=[],i=[];(t.data.api_fields||[]).forEach(function(t){e.isStartMode?a.push(t):1===t.field_is_default?a.push(t):i.push(t)}),e.data=a,e.newParamsData=i})},open:function(){this.dialogVisible=!0},close:function(){this.dialogVisible=!1,this.loading=!1},sort:function(t,e){var a=this.newParamsData.indexOf(t);if("up"===e){var i;if(a-1<0)return;t=this.newParamsData.splice(a,1),(i=this.newParamsData).splice.apply(i,[a-1,0].concat(Qt()(t)))}else if("down"===e){var n;if(a+1>=this.newParamsData.length)return;t=this.newParamsData.splice(a,1),(n=this.newParamsData).splice.apply(n,[a+1,0].concat(Qt()(t)))}},save:function(){var t=this.paramsValidate();if("string"==typeof t)this.$notice.warning({title:"Warning",message:t});else if("boolean"==typeof t&&t){if(this.setSortFields(),!this.validateSort())return void this.$notice.warning({title:"Warning",message:"主键配置要在非主键配置之前"});this.sendRequest({api_id:this.id,api_fields:2===this.status?this.newParamsData:this.data.concat(this.newParamsData)})}},getMaxSortIndex:function(){return this.data.reduce(function(t,e){return e.field_sort>t&&(t=e.field_sort),t},1)},setSortFields:function(){var t=this.getMaxSortIndex();this.newParamsData.forEach(function(e,a){e.field_sort=a+t+1})},validateSort:function(){var t=1/0;return this.newParamsData.every(function(e){return 0===e.field_is_primary_key?(e.field_sort<t&&(t=e.field_sort),!0):1===e.field_is_primary_key?e.field_sort<t:void 0})},paramsValidate:function(){var t=!0,e=!1,a=void 0;try{for(var i,n=Yt()(this.newParamsData);!(t=(i=n.next()).done);t=!0){var s=i.value,l=s.field_name.trim(),o=s.field_default_value.trim(),r=s.field_desc.trim();if(!l)return this.$set(s,"_error",!0),"字段名称不能为空";if(!$t(l))return this.$set(s,"_error",!0),"字段名称仅支持英文字母和下划线且不能以数字开头";if(!o)return this.$set(s,"_error",!0),"默认值不能为空";if(/[^a-zA-Z0-9.]/g.test(o))return this.$set(s,"_error",!0),"默认值仅支持字母数字和'.'";if(!r)return this.$set(s,"_error",!0),"字段说明不能为空"}}catch(t){e=!0,a=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw a}}return!0},sendRequest:function(t){var e=this;this.loading=!0;var a=2===this.status?"api/fields/running_update/":"api/fields/update/";this.$http.post(a,t).then(function(t){e.loading=!1,e.getApiConfigFields(e.id),e.newParamsData=[]})},getDefaultRow:function(){return{id:"",field_name:"",field_default_value:"",field_type:"string",field_desc:"",field_isnull:1,field_is_default:0,field_api_type:"string",field_is_primary_key:0}},addParams:function(){var t=this.getDefaultRow();this.newParamsData.push(t)},deleteParams:function(t){this.newParamsData.splice(t,1)}},computed:{isStartMode:function(){return 2===this.status}},watch:{dialogVisible:function(t){t&&this.getApiConfigFields(this.id)}}},te={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{"custom-class":"interface-add-config-dialog",title:"接口配置",visible:t.dialogVisible,"close-on-click-modal":!1,"before-close":t.close,width:"70%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"dialog-body"},[a("div",{staticClass:"tool-bar"},[a("el-button",{staticStyle:{"margin-left":"auto"},attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addParams()}}},[t._v("新增参数")])],1),t._v(" "),a("div",{staticClass:"table-container"},[a("table",[a("thead",[a("tr",t._l(t.tableColumns,function(e){return a("th",{key:e.field,style:{minWidth:e.width+"px"}},[t._v(t._s(e.label))])}))]),t._v(" "),a("tbody",{staticClass:"disabled-drag"},t._l(t.data,function(e){return a("tr",{key:e.id,staticStyle:{"border-bottom":"1px solid #e5e5e5",height:"40px"}},t._l(t.tableColumns,function(i){return a("td",{key:i.field},["field_is_primary_key"===i.field?[t._v("\n                "+t._s(t._f("statusFilters")(e.field_is_primary_key))+"\n              ")]:"field_isnull"===i.field?[t._v("\n               "+t._s(t._f("statusFilters")(e.field_isnull))+"\n              ")]:[t._v("\n                "+t._s(e[i.field])+"\n              ")]],2)}))})),t._v(" "),a("tbody",{staticClass:"container dragable"},t._l(t.newParamsData,function(e,i){return a("tr",{key:i,class:{"data-error":e._error}},[t._l(t.tableColumns,function(i){return["field_name"===i.field?a("td",{key:i.field},[a("el-input",{attrs:{placeholder:"字段名称",size:"mini"},model:{value:e[i.field],callback:function(a){t.$set(e,i.field,a)},expression:"row[columns['field']]"}})],1):t._e(),t._v(" "),"field_default_value"===i.field?a("td",{key:i.field},[a("el-input",{attrs:{placeholder:"字段默认值",size:"mini"},model:{value:e[i.field],callback:function(a){t.$set(e,i.field,a)},expression:"row[columns['field']]"}})],1):t._e(),t._v(" "),"field_type"===i.field?a("td",{key:i.field},[a("el-select",{attrs:{placeholder:"请选择类型",size:"mini"},model:{value:e[i.field],callback:function(a){t.$set(e,i.field,a)},expression:"row[columns['field']]"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),"field_api_type"===i.field?a("td",{key:i.field},[a("el-select",{attrs:{placeholder:"请选择类型",size:"mini"},model:{value:e[i.field],callback:function(a){t.$set(e,i.field,a)},expression:"row[columns['field']]"}},t._l(t.apiTypeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),"field_desc"===i.field?a("td",{key:i.field},[a("el-input",{attrs:{placeholder:"字段说明",size:"mini"},model:{value:e[i.field],callback:function(a){t.$set(e,i.field,a)},expression:"row[columns['field']]"}})],1):t._e(),t._v(" "),"field_isnull"===i.field?a("td",{key:i.field},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e[i.field],callback:function(a){t.$set(e,i.field,a)},expression:"row[columns['field']]"}},[a("el-radio-button",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio-button",{attrs:{label:0}},[t._v("否")])],1)],1):t._e(),t._v(" "),"field_is_primary_key"===i.field?a("td",{key:i.field},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e[i.field],callback:function(a){t.$set(e,i.field,a)},expression:"row[columns['field']]"}},[a("el-radio-button",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio-button",{attrs:{label:0}},[t._v("否")])],1)],1):t._e(),t._v(" "),"field_is_default"===i.field?a("td",{key:i.field},[a("el-radio-group",{attrs:{size:"mini"},model:{value:e[i.field],callback:function(a){t.$set(e,i.field,a)},expression:"row[columns['field']]"}},[a("el-radio-button",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio-button",{attrs:{label:0}},[t._v("否")])],1)],1):t._e()]}),t._v(" "),a("td",[[a("el-button",{staticClass:"etl-btn mini",attrs:{type:"default",icon:"el-icon-arrow-down",title:"下移"},on:{click:function(a){t.sort(e,"down")}}}),t._v(" "),a("el-button",{staticClass:"etl-btn mini",attrs:{type:"default",icon:"el-icon-arrow-up",title:"上移"},on:{click:function(a){t.sort(e,"up")}}}),t._v(" "),a("el-button",{staticClass:"etl-btn mini",attrs:{type:"danger",icon:"el-icon-delete",title:"删除"},on:{click:function(e){t.deleteParams(i)}}})]],2)],2)}))])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.close()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.save()}}},[t._v("保 存")])],1)])},staticRenderFns:[]};var ee={name:"Interface",data:function(){return{loading:!1,interface_name:"",interface_label:"",primary_table:"",data_type:"",primary_database:"",primary_database_label:"",options:[{type:"dropdown",labelName:"bname",valueName:"id",selected:1,list:[]}],myBusinessList:[],tableColumns:[{label:"业务名称",field:"bname"},{label:"接口名称",field:"api"},{label:"接口中文注释",field:"api_desc"},{label:"接口创建人信息",field:"creater_user_info"},{label:"数据库表",field:"api_table"},{label:"数据库表注释",field:"api_table_desc"},{label:"api数据类型",field:"api_data_type"},{label:"api接口数据量",field:"api_flume_template"},{label:"状态名称",field:"status_name"},{label:"最后更新人",field:"updater_user_info"},{label:"操作",field:"operate",width:150,fixed:"right"}],APIList:[],bid:"",apiData:{bid:"",api:"",api_desc:"",api_table:"",api_table_desc:"",api_data_type:"",api_flume_template:""},currentRow:{},addApiDialogMode:"add"}},props:[],components:{AddApiDialog:Jt,AddConfigDialog:a("Z0/y")(Xt,te,!1,function(t){a("og3Y")},"data-v-35871bae",null).exports},mounted:function(){var t=this;return Zt()(Vt.a.mark(function e(){return Vt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMyBusinessList();case 2:t.myBusinessList=e.sent,t.options[0].list=t.myBusinessList,t.bid=t.options[0].selected||t.options[0].list[0].id,t.apiData.bid=t.bid,t.getAPIList(t.bid);case 7:case"end":return e.stop()}},e,t)}))()},methods:{getMyBusinessList:function(){var t=this;return Zt()(Vt.a.mark(function e(){var a;return Vt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("business/list/",{type:"my"});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,t)}))()},getAPIList:function(t){var e=this;this.loading=!0,this.$http.get("api/list/",{bid:t}).then(function(t){e.loading=!1,e.APIList=t.data})},openAddDialog:function(){var t=this;this.apiData={},xt()(this.apiData).forEach(function(e){t.apiData[e]=""}),this.addApiDialogMode="add",this.apiData.bid=this.bid,this.$refs.addApiDialog.open()},openConfigDialog:function(t){this.currentRow=t,this.$refs.configDialog.open()},change:function(t){var e=t.value,a=t.index;t.option,t.options;0===a&&(this.getAPIList(e),this.bid=e)},apiEdit:function(t){this.currentRow=t,this.apiData=JSON.parse(It()(t)),2!==t.status?(this.addApiDialogMode="edit",this.$refs.addApiDialog.open()):this.$notice.error({title:"Error",message:"请先禁用，然后进行编辑"})},toggle:function(t,e){var a=this;return Zt()(Vt.a.mark(function i(){var n;return Vt.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=0===t.status||1===t.status?2:0,a.currentRow=t,!e){i.next=9;break}return i.next=5,a.getApiConfigFields(t.id);case 5:if(i.sent.data.api_fields.length){i.next=9;break}return a.$notice.error({title:"Error",message:"参数配置不能为空"}),i.abrupt("return");case 9:a.$confirm("确定"+(e?"开启":"禁用")+"吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post("api/switch/status/",{api_id:t.id,status:n}).then(function(e){t.status=n})}).catch(function(){});case 10:case"end":return i.stop()}},i,a)}))()},getApiConfigFields:function(t){return this.$http.get("api/detail/",{api_id:t})}}},ae={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"interface-query"},[a("AppTable",{attrs:{loading:t.loading,title:"接口查询",tableRows:20,tableColumns:t.tableColumns,tableData:t.APIList,options:t.options,hasEdit:!0},on:{onEdit:function(e){t.apiEdit(e)},optionsSelectedChange:t.change},scopedSlots:t._u([{key:"operate",fn:function(e){return[a("el-button",{staticClass:"etl-btn mini",attrs:{type:"default",icon:"el-icon-setting",title:"配置"},on:{click:function(a){t.openConfigDialog(e.row)}}}),t._v(" "),2!=e.row.status||1==e.row.status?a("el-button",{staticClass:"etl-btn mini",attrs:{type:"success",icon:"el-icon-check",title:"启用"},on:{click:function(a){t.toggle(e.row,!0)}}}):t._e(),t._v(" "),0!=e.row.status&&1!=e.row.status?a("el-button",{staticClass:"etl-btn mini",attrs:{type:"danger",icon:"el-icon-close",title:"禁用"},on:{click:function(a){t.toggle(e.row,!1)}}}):t._e()]}}])},[a("template",{slot:"custom-toolbar"},[a("el-button",{staticClass:"custom-toolbar-wrap",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.openAddDialog()}}},[t._v("新增自定义接口")])],1)],2),t._v(" "),a("AddConfigDialog",{ref:"configDialog",attrs:{id:t.currentRow.id,status:t.currentRow.status}}),t._v(" "),a("AddApiDialog",{ref:"addApiDialog",attrs:{data:t.apiData,mode:t.addApiDialogMode},on:{confirm:function(e){t.getAPIList(t.bid)}}})],1)},staticRenderFns:[]};var ie=a("Z0/y")(ee,ae,!1,function(t){a("PGug")},"data-v-fdfb79c6",null).exports,ne={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"database-page"},[a("AppTable",{attrs:{title:"数据库表配置",tableRows:20,tableColumns:t.tableColumns,tableData:t.tableData,hasEdit:!0},on:{onEdit:function(e){t.edit(e)}}})],1)},staticRenderFns:[]};var se=a("Z0/y")({name:"Database",data:function(){return{tableColumns:[{label:"表类型",field:"type"},{label:"库名",field:"database_name"},{label:"数据表",field:"table_name"},{label:"表名",field:"table_label"},{label:"描述",field:"description"},{label:"权限等级",field:"weight"},{label:"是否可见",field:"visible"},{label:"操作",field:"operate",width:300}],tableData:[{type:"流水表",database_name:"1",table_name:"d",table_label:"D",description:"",weight:"0",visible:0},{type:"流水表",database_name:"2",table_name:"j",table_label:"J",description:"",weight:"1",visible:0},{type:"流水表",database_name:"3",table_name:"l",table_label:"L",description:"",weight:"2",visible:0}]}},props:[],components:{},methods:{edit:function(t){}}},ne,!1,function(t){a("BnPR")},"data-v-2afa0f1a",null).exports,le={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-auth-page"},[e("router-view")],1)},staticRenderFns:[]};var oe=a("Z0/y")({name:"Auth",data:function(){return{}},props:[]},le,!1,function(t){a("g++a")},"data-v-4a37cbd2",null).exports,re=[{role_id:1,role_name:"普通用户"},{role_id:2,role_name:"业务管理人员"},{role_id:3,role_name:"业务配置人员"},{role_id:99,role_name:"管理人员",hidden:!0}],ce={name:"Apply",data:function(){return{businessId:void 0,reason:"",roleConfig:re,businessList:[],myBusinessList:[],number:0}},props:[],components:{},mounted:function(){this.getBusinessList(),this.getMyBusinessList()},methods:{getBusinessList:function(){var t=this;this.$http.get("business/list/",{type:"auth"}).then(function(e){t.businessList=e.data})},getMyBusinessList:function(){var t=this;this.$http.get("business/list/",{type:"my"}).then(function(e){t.myBusinessList=e.data})},apply:function(){var t={bid:this.businessId,reason:this.reason},e=this.paramsValidate(t);if("string"==typeof e)return l.a.warning({title:"Warning",message:e}),!1;"boolean"==typeof e&&e&&this.sendRequest(t)},paramsValidate:function(t){var e=t.reason.trim();return void 0===t.bid?"请选择业务类型":!!e||"请填写申请理由"},sendRequest:function(t){this.$http.post("auth/apply/",t).then(function(t){})}},computed:St()({},Object(pt.c)(["userMsg"]),{currentBusiness:function(){return this.myBusinessList.length?this.myBusinessList.map(function(t){return t.bname}).join("、"):"无"}})},ue={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auth-apply-page"},[a("el-card",{staticClass:"box-card"},[a("ul",{staticClass:"-etl-list-group"},[a("li",{staticClass:"list-item"},[a("span",{staticClass:"title"},[t._v("当前角色")]),t._v(" "),a("div",{staticClass:"value"},[t._v(t._s(t.userMsg.role_name))])]),t._v(" "),a("li",{staticClass:"list-item my-business"},[a("span",{staticClass:"title"},[t._v("当前业务")]),t._v(" "),a("div",{staticClass:"value"},[t._v("\n          "+t._s(t.currentBusiness)+"\n        ")])]),t._v(" "),a("li",{staticClass:"list-item"},[a("span",{staticClass:"title"},[t._v("申请业务")]),t._v(" "),a("div",{staticClass:"value"},[a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:t.businessId,callback:function(e){t.businessId=e},expression:"businessId"}},t._l(t.businessList,function(t){return a("el-option",{key:t.id,attrs:{label:t.bname,value:t.id}})}))],1)]),t._v(" "),a("li",{staticClass:"list-item"},[a("span",{staticClass:"title"},[t._v("申请理由")]),t._v(" "),a("div",{staticClass:"value",staticStyle:{flex:"0 0 193px"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入申请理由"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1)]),t._v(" "),a("li",{staticClass:"list-item"},[a("span",{staticClass:"title"}),t._v(" "),a("div",{staticClass:"value"},[a("el-button",{staticClass:"title",attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){t.apply()}}},[t._v("申请")])],1)])])])],1)},staticRenderFns:[]};var de=a("Z0/y")(ce,ue,!1,function(t){a("Hx8C")},"data-v-e63d0070",null).exports,pe={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("AppTable",{attrs:{title:"我的申请",tableRows:20,border:!0,tableColumns:t.tableColumns,tableData:t.myApplyList},scopedSlots:t._u([{key:"audit_info",fn:function(e){return[t._v("\n    "+t._s(2==e.row.status?e.row.audit_user_info:e.row.current_audit_user_info)+"\n  ")]}}])})},staticRenderFns:[]};var fe=a("Z0/y")({name:"MyApplication",data:function(){return{tableColumns:[{label:"业务id",field:"bid"},{label:"业务名称",field:"bname"},{label:"申请人",field:"user_info"},{label:"审核员",slotName:"audit_info"},{label:"申请原因",field:"reason"},{label:"申请时间",field:"create_time"},{label:"审核时间",field:"audit_time"},{label:"审核说明",field:"audit_remark"},{label:"审核状态",field:"status_name"}],myApplyList:[]}},props:[],mounted:function(){this.getApplyList()},methods:{getApplyList:function(){var t=this;this.$http.get("auth/my/apply/").then(function(e){t.myApplyList=e.data})}}},pe,!1,function(t){a("bsMX")},"data-v-72a1fbc5",null).exports,me={name:"Check",data:function(){return{remark:"",dialogVisible:!1,currentRow:{},currentOp:"",tableColumns:[{label:"业务id",field:"bid"},{label:"业务名称",field:"bname"},{label:"申请人",field:"user_info"},{label:"申请原因",field:"reason"},{label:"申请时间",field:"create_time"},{label:"审核时间",field:"audit_time"},{label:"当前审核员",field:"current_audit_user_info"},{label:"最终审核员",field:"audit_user_info"},{label:"审核说明",field:"audit_remark"},{label:"审核状态",field:"status_name"},{label:"操作",field:"operate",width:100}],pendingList:[]}},props:[],components:{},mounted:function(){this.getPendingList()},methods:{getPendingList:function(){var t=this;this.$http.get("auth/my/audit/list/").then(function(e){t.pendingList=e.data})},operate:function(t,e){this.currentOp=t,this.currentRow=e,1===this.currentOp?this.pass():this.dialogVisible=!0},pass:function(){var t=this,e={apply_id:this.currentRow.id,operate:this.currentOp,remark:this.remark};this.$confirm("确定通过该条记录吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.sendRequest(e)}).catch(function(){})},reject:function(){var t={apply_id:this.currentRow.bid,operate:this.currentOp,remark:this.remark},e=this.paramsValidate(t);if("string"==typeof e)return this.$notice.warning({title:"Warning",message:e}),!1;"boolean"==typeof e&&e&&this.sendRequest(t)},sendRequest:function(t){var e=this;this.$http.post("auth/my/audit/op/",t).then(function(t){e.dialogVisible=!1,e.getPendingList()})},paramsValidate:function(t){return!!t.remark.trim()||"拒绝理由不能为空"}},destroyed:function(){}},he={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-auth-check"},[a("AppTable",{attrs:{title:"权限审批",tableRows:20,border:!0,tableColumns:t.tableColumns,tableData:t.pendingList},scopedSlots:t._u([{key:"operate",fn:function(e){return[a("el-button",{staticClass:"etl-btn mini",attrs:{type:"success",icon:"el-icon-check",title:"通过"},on:{click:function(a){t.operate(1,e.row)}}}),t._v(" "),a("el-button",{staticClass:"etl-btn mini",attrs:{type:"danger",icon:"el-icon-close",title:"拒绝"},on:{click:function(a){t.operate(0,e.row)}}})]}}])}),t._v(" "),a("el-dialog",{attrs:{title:"审核理由",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.reject()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var be=a("Z0/y")(me,he,!1,function(t){a("ja61")},"data-v-813906e4",null).exports,ve={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auth-settings-page"},[a("AppTable",{attrs:{title:"用户列表",tableRows:20,border:!0,tableColumns:t.tableColumns,tableData:t.tableData,hasEdit:!0},on:{onEdit:function(e){t.edit(e)}}}),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"dialog-body"},[a("ul",{staticClass:"-etl-list-group"},[a("li",{staticClass:"list-item"},[a("span",{staticClass:"title"},[t._v("角色")]),t._v(" "),a("div",{staticClass:"value"},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.role,callback:function(e){t.role=e},expression:"role"}},[a("el-radio-button",{attrs:{label:"1",border:""}},[t._v("管理员")]),t._v(" "),a("el-radio-button",{attrs:{label:"2",border:""}},[t._v("业务人员")]),t._v(" "),a("el-radio-button",{attrs:{label:"3",border:""}},[t._v("普通用户")])],1)],1)]),t._v(" "),a("li",{staticClass:"list-item"},[a("span",{staticClass:"title"},[t._v("已有业务")]),t._v(" "),a("div",{staticClass:"value"},[a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:t.studio,callback:function(e){t.studio=e},expression:"studio"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var _e=a("Z0/y")({name:"Settings",data:function(){return{tableColumns:[{label:"用户工号",field:"workid"},{label:"用户名",field:"user_cname"},{label:"用户英文名",field:"user_name"},{label:"角色名称",field:"role_name"}],tableData:[],dialogVisible:!1,currentRow:{},role:"",studio:"",options:[{value:"选项1",label:"双皮奶1"},{value:"选项2",label:"双皮奶2"},{value:"选项3",label:"双皮奶3"}]}},props:[],components:{},mounted:function(){this.getAdminList()},methods:{edit:function(t){this.currentRow=t,this.dialogVisible=!0},getAdminList:function(){var t=this;this.$http.get("user/admin/list/").then(function(e){t.tableData=e.data})}}},ve,!1,function(t){a("lZdj")},"data-v-3ebae282",null).exports,ge={name:"BusinessDetailsDialog",data:function(){var t=function(t,e,a){return e?function(t){return wt()(+t)}(e)?void a():a(new Error("请输入整数")):a(new Error("必填"))},e=function(t,e,a){return e?function(t){return/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)}(e)?void a():a(new Error("请输入正确ip")):a(new Error("必填"))};return{copyData:{},dialogVisible:!1,rules:{bname:[{required:!0,message:"请输入业务名称",trigger:"blur"}],bename:[{required:!0,message:"请输入业务英文名称",trigger:"blur"}],bkafka_ip:[{required:!0,message:"请输入kafka连接ip",trigger:"blur"}],bkafka_port:[{trigger:"blur",validator:t}],bkafka_user:[{required:!0,message:"请输入kafka连接用户名",trigger:"blur"}],bkafka_pkey:[{required:!0,message:"请输入kafka连接密钥",trigger:"blur"}],bhive_ip:[{trigger:"blur",validator:e}],bhive_port:[{trigger:"blur",validator:t}],bhive_user:[{required:!0,message:"请输入hive用户名",trigger:"blur"}],bhive_password:[{required:!0,message:"请输入hive登录密码",trigger:"blur"}],bimpala_ip:[{trigger:"blur",validator:e}],bimpala_port:[{trigger:"blur",validator:t}],bzk_host:[{required:!0,message:"请输入zookeeper集群地址",trigger:"blur"}],bzk_path:[{required:!0,message:"请输入zookeeper路径",trigger:"blur"}],bflume_endpoint:[{required:!0,message:"请输入hive表flume链接地址",trigger:"blur"}],bkafka_connector_endpoint:[{required:!0,message:"请输入kudo表kafaka connect链接地址",trigger:"blur"}],bkudu_master_host:[{required:!0,message:"请输入kudo master host",trigger:"blur"}],bmanager_workids:[{required:!0,message:"业务管理员不能为空",trigger:"change"}]}}},props:["data","mode"],components:{},mounted:function(){},methods:{initSelector:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];$("#etl-person-selector").uCheck("etl-person-selector",e,{size:8,callback:function(e){t.copyData.bmanager=e.join(","),t.copyData.bmanager_info=e.join(","),t.copyData.bmanager_workids=e.join(",")}})},open:function(){this.dialogVisible=!0},close:function(){this.dialogVisible=!1,this.resetForm("business-details-form")},paramsValidate:function(){},sendRequest:function(){var t=this,e="add"===this.mode?"business/add/":"business/update/";"edit"===this.mode&&(this.copyData.bid=this.copyData.id,delete this.copyData.id),this.$http.post(e,this.copyData).then(function(e){t.close(),t.$emit("confirm")})},save:function(){var t=this;this.$refs["business-details-form"].validate(function(e){if(!e)return!1;t.sendRequest()})},resetForm:function(t){this.$refs[t].resetFields()}},watch:{dialogVisible:function(t){var e=this;t&&(this.copyData=JSON.parse(It()(this.data)),this.$nextTick(function(){var t=e.copyData.bmanager_workids?e.copyData.bmanager_workids.split(","):[];e.initSelector(t)}))}}},ye={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{"custom-class":"business-details-dialog",title:"业务详情","close-on-click-modal":!1,"before-close":t.close,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"dialog-body"},[a("el-form",{ref:"business-details-form",attrs:{model:t.copyData,"label-width":"150px",size:"mini",rules:t.rules}},[a("el-form-item",{attrs:{label:"业务名称",prop:"bname"}},[a("el-input",{attrs:{placeholder:"业务名称",size:"small"},model:{value:t.copyData.bname,callback:function(e){t.$set(t.copyData,"bname",e)},expression:"copyData.bname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"kafka连接ip",prop:"bkafka_ip"}},[a("el-input",{attrs:{placeholder:"kafka连接ip",size:"small"},model:{value:t.copyData.bkafka_ip,callback:function(e){t.$set(t.copyData,"bkafka_ip",e)},expression:"copyData.bkafka_ip"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"kafka连接端口",prop:"bkafka_port"}},[a("el-input",{attrs:{placeholder:"kafka连接端口",size:"small"},model:{value:t.copyData.bkafka_port,callback:function(e){t.$set(t.copyData,"bkafka_port",e)},expression:"copyData.bkafka_port"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"kafka连接用户名",prop:"bkafka_user"}},[a("el-input",{attrs:{placeholder:"kafka连接用户名",size:"small"},model:{value:t.copyData.bkafka_user,callback:function(e){t.$set(t.copyData,"bkafka_user",e)},expression:"copyData.bkafka_user"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"kafka连接密钥",prop:"bkafka_pkey"}},[a("el-input",{attrs:{placeholder:"kafka连接密钥",size:"small",type:"textarea",autosize:{minRows:1,maxRows:4}},model:{value:t.copyData.bkafka_pkey,callback:function(e){t.$set(t.copyData,"bkafka_pkey",e)},expression:"copyData.bkafka_pkey"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"hive数据库名",prop:"bhive_db_name"}},[a("el-input",{attrs:{placeholder:"hive数据库名",size:"small"},model:{value:t.copyData.bhive_db_name,callback:function(e){t.$set(t.copyData,"bhive_db_name",e)},expression:"copyData.bhive_db_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"hive连接ip",prop:"bhive_ip"}},[a("el-input",{attrs:{placeholder:"hive连接ip",size:"small"},model:{value:t.copyData.bhive_ip,callback:function(e){t.$set(t.copyData,"bhive_ip",e)},expression:"copyData.bhive_ip"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"hive连接端口",prop:"bhive_port"}},[a("el-input",{attrs:{placeholder:"hive连接端口",size:"small"},model:{value:t.copyData.bhive_port,callback:function(e){t.$set(t.copyData,"bhive_port",e)},expression:"copyData.bhive_port"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"impala数据库名",prop:"bimpala_db_name"}},[a("el-input",{attrs:{placeholder:"impala数据库名",size:"small"},model:{value:t.copyData.bimpala_db_name,callback:function(e){t.$set(t.copyData,"bimpala_db_name",e)},expression:"copyData.bimpala_db_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"impala连接ip",prop:"bimpala_ip"}},[a("el-input",{attrs:{placeholder:"impala连接ip",size:"small"},model:{value:t.copyData.bimpala_ip,callback:function(e){t.$set(t.copyData,"bimpala_ip",e)},expression:"copyData.bimpala_ip"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"impala端口",prop:"bimpala_port"}},[a("el-input",{attrs:{placeholder:"impala端口",size:"small"},model:{value:t.copyData.bimpala_port,callback:function(e){t.$set(t.copyData,"bimpala_port",e)},expression:"copyData.bimpala_port"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"zookeeper集群地址",prop:"bzk_host"}},[a("el-input",{attrs:{placeholder:"zookeeper集群地址",size:"small"},model:{value:t.copyData.bzk_host,callback:function(e){t.$set(t.copyData,"bzk_host",e)},expression:"copyData.bzk_host"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"zookeeper路径",prop:"bzk_path"}},[a("el-input",{attrs:{placeholder:"zookeeper路径",size:"small"},model:{value:t.copyData.bzk_path,callback:function(e){t.$set(t.copyData,"bzk_path",e)},expression:"copyData.bzk_path"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"hive表flume链接地址",prop:"bflume_endpoint"}},[a("el-input",{attrs:{placeholder:"hive表flume链接地址",size:"small"},model:{value:t.copyData.bflume_endpoint,callback:function(e){t.$set(t.copyData,"bflume_endpoint",e)},expression:"copyData.bflume_endpoint"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"kudo表kafaka connect链接地址",prop:"bkafka_connector_endpoint"}},[a("el-input",{attrs:{placeholder:"kudo表kafaka connect链接地址",size:"small"},model:{value:t.copyData.bkafka_connector_endpoint,callback:function(e){t.$set(t.copyData,"bkafka_connector_endpoint",e)},expression:"copyData.bkafka_connector_endpoint"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"kudo master host",prop:"bkudu_master_host"}},[a("el-input",{attrs:{placeholder:"kudo master host",size:"small"},model:{value:t.copyData.bkudu_master_host,callback:function(e){t.$set(t.copyData,"bkudu_master_host",e)},expression:"copyData.bkudu_master_host"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"业务管理员信息",prop:"bmanager_workids"}},[a("div",{attrs:{id:"etl-person-selector"}})])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.close()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.save()}}},[t._v("保 存")])],1)])},staticRenderFns:[]};var ke={name:"business-list",data:function(){return{tableColumns:[{label:"业务名称",field:"bname"},{label:"kafka连接ip",field:"bkafka_ip"},{label:"kafka连接端口",field:"bkafka_port"},{label:"kafka连接用户名",field:"bkafka_user"},{label:"kafka连接密码",field:"bkafka_password"},{label:"kafka 业务 topic",field:"bkafka_topic"},{label:"hive连接ip",field:"bhive_ip"},{label:"hive连接端口",field:"bhive_port"},{label:"hive用户名",field:"bhive_user"},{label:"hive登录密码",field:"bhive_password"},{label:"hive库名称",field:"bhive_db_name"},{label:"impala连接ip",field:"bimpala_ip"},{label:"impala端口",field:"bimpala_port"},{label:"impala 用户",field:"bimpala_user"},{label:"impala 密码",field:"bimpala_password"},{label:"impala 库名称",field:"bimpala_db_name"},{label:"zookeeper集群地址",field:"bzk_host"},{label:"zookeeper路径",field:"bzk_path"},{label:"hive表flume链接地址",field:"bflume_endpoint"},{label:"kudo表kafaka connect链接地址",field:"bkudo_endpoint"},{label:"业务管理员信息",field:"bmanager_info"},{label:"业务状态",field:"bstatus"},{label:"操作",field:"operate",width:100,fixed:"right"}],tableData:[],currentRow:{},mode:"add",loading:!1}},props:[],components:{BusinessDetailsDialog:a("Z0/y")(ge,ye,!1,function(t){a("NAO3")},"data-v-2be7da35",null).exports},mounted:function(){this.getBusinessList()},methods:{getBusinessList:function(){var t=this;this.loading=!0,this.$http.get("business/admin/list/").then(function(e){t.tableData=e.data,t.loading=!1})},openDetailsDialog:function(t){this.currentRow=t,this.mode="edit",this.$refs.detailsDialog.open()},addBusiness:function(){this.currentRow={},this.mode="add",this.$refs.detailsDialog.open()},del:function(t){return this.$http.post("business/delete/",t)},delBusiness:function(t){var e=this;this.currentRow=t,this.$confirm("是否删除该业务?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.del({bid:t.id}).then(function(t){e.getBusinessList()})}).catch(function(){})},confirm:function(){this.getBusinessList()}}},Ce={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"business-manage"},[a("AppTable",{attrs:{title:"业务列表",loading:t.loading,tableRows:20,border:!0,tableColumns:t.tableColumns,tableData:t.tableData},scopedSlots:t._u([{key:"operate",fn:function(e){return[a("el-button",{staticClass:"etl-btn mini",attrs:{type:"primary",icon:"el-icon-info",title:"详情"},on:{click:function(a){t.openDetailsDialog(e.row)}}}),t._v(" "),a("el-button",{staticClass:"etl-btn mini",attrs:{type:"danger",icon:"el-icon-delete",title:"删除"},on:{click:function(a){t.delBusiness(e.row)}}})]}}])},[a("template",{slot:"custom-toolbar"},[a("el-button",{staticClass:"custom-toolbar-wrap",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addBusiness()}}},[t._v("新增业务")])],1)],2),t._v(" "),a("BusinessDetailsDialog",{ref:"detailsDialog",attrs:{data:t.currentRow,mode:t.mode},on:{confirm:function(e){t.confirm()}}})],1)},staticRenderFns:[]};var we=a("Z0/y")(ke,Ce,!1,function(t){a("Bznj")},"data-v-68813d60",null).exports,De={data:function(){return{options:[{type:"dropdown",labelName:"bname",valueName:"id",query:{url:"business/list/",params:{type:"my"}},sync:!0},{type:"multiSelect",defaultSelectedNumber:1,labelName:"bname",valueName:"id",query:{url:"business/list/",params:{type:"my"}},sync:!0},{type:"singleSelect",horizontalCount:2,list:[{label:"选项一",value:0},{label:"选项二",value:1},{label:"选项三",value:2}]},{type:"cascade",selected:[1],list:[{value:"zhinan",label:"指南",children:[{value:"shejiyuanze",label:"设计原则",children:[{value:"yizhi",label:"一致"},{value:"fankui",label:"反馈"},{value:"xiaolv",label:"效率"},{value:"kekong",label:"可控"}]},{value:"daohang",label:"导航",children:[{value:"cexiangdaohang",label:"侧向导航"},{value:"dingbudaohang",label:"顶部导航"}]}]}]}],routesConfig:Re}},mounted:function(){},components:{},methods:{change:function(t){},optionsReady:function(){}}},xe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-plugins"},[a("AppOptions",{attrs:{options:t.options},on:{optionsSelectedChange:function(e){t.change(e)},optionsReady:function(e){t.optionsReady()}}}),t._v(" "),a("AppMenu",{attrs:{menus:t.routesConfig}})],1)},staticRenderFns:[]},$e=a("Z0/y")(De,xe,!1,null,null,null).exports,Ae=a("QW0Y"),Re=[{path:"/interface",name:"Interface",icon:"fa-link",label:"接口查询",component:ie,permission:[2,3,99],beforeEnter:function(t,e,a){var i=vt.state.userMsg;[2,3,99].includes(i.role_id)?a():a({path:"/auth"})}},{path:"/database",name:"Database",icon:"fa-database",label:"数据库查询",permission:[],component:se},{path:"/business",name:"Business",icon:"fa-briefcase",label:"业务管理",component:we,permission:[99],beforeEnter:function(t,e,a){var i=vt.state.userMsg;[99].includes(i.role_id)?a():a("/")}},{path:"/settings",name:"Settings",icon:"fa-users",label:"用户列表",component:_e,permission:[99],beforeEnter:function(t,e,a){var i=vt.state.userMsg;[99].includes(i.role_id)?a():a({path:"/auth"})}},{path:"/auth",icon:"fa-th-large",label:"权限管理",component:oe,childrenPosition:"top",children:[{path:"apply",name:"Apply",label:"权限申请",component:de},{path:"myApplication",name:"myApplication",label:"我的申请",component:fe},{path:"check",name:"Check",label:"我的审核",component:be,permission:[2,3,99],beforeEnter:function(t,e,a){var i=vt.state.userMsg;[2,3,99].includes(i.role_id)?a():a({path:"/auth"})}},{path:"",redirect:"apply",hidden:!0}]},{path:"/plugins",name:"Plugins",label:"插件",component:$e,hidden:!0},{path:"",redirect:"/auth",hidden:!0}],Se=[{path:"/",component:Ot,children:Re},{path:"**",component:Ae.default}],Ee=a("z0pV");rt.default.use(At.a);var ze=new At.a({mode:"history",routes:Se});ze.beforeEach(function(t,e,a){var i=t.fullPath.split("/");i.shift();var n=function(t,e){var a=0,i=Ee.join("/",e[a]),n=[];return function t(i,s){i.forEach(function(l){if(!l.hidden){var o=Ee.join("/",l.path);o===s&&Array.isArray(l.children)&&("top"!==l.childrenPosition?(i=l.children,a++,s=Ee.join("/",e[a]),t(i,s)):n=l.children)}})}(t,i),n}(Re,i);vt.dispatch("setGlobalHeader",n),a()});var Pe=ze,Le=a("AA3o"),Me=a.n(Le),Ne=a("xSur"),Te=a.n(Ne),Be=a("aozt"),Oe=a.n(Be),Fe="http://etl-server-test.oa.com/",Ie="http://sso.oa.com/Index/login/appid/1873",je=0,Ve=-14;Oe.a.interceptors.request.use(function(t){return t.withCredentials=!0,t},function(t){return n.a.reject(t)}),Oe.a.interceptors.response.use(function(t){return 200===t.status&&(t.data.error_code!==je?t.data.error_code===Ve&&(window.location.href=Ie):"post"===t.config.method&&l.a.success({title:"Success",message:"操作成功"})),t},function(t){return n.a.reject(t)});var qe=new(function(){function t(){Me()(this,t)}return Te()(t,[{key:"get",value:function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t=Fe+t,new n.a(function(i,n){Oe.a.get(t,{params:e}).then(function(t){i(t.data)}).catch(function(t){a&&l.a.error({title:"Error",message:"服务器错误"}),n(t)})})}},{key:"post",value:function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t=Fe+t,"FormData"!==e.constructor.name&&(e=this.formatData(e)),new n.a(function(i,n){Oe.a.post(t,e,{headers:{"content-type":"application/x-www-form-urlencoded"}}).then(function(t){0!==t.data.error_code&&(a&&l.a.error({title:"Error",message:t.data.error_message}),n(t.data.error_message)),i(t.data)}).catch(function(t){a&&l.a.error({title:"Error",message:"服务器错误"}),n(t)})})}},{key:"formatData",value:function(t){var e=[];return xt()(t).forEach(function(a){var i=t[a],n=encodeURIComponent(a)+"="+encodeURIComponent(t[a]);Array.isArray(i)&&(n=encodeURIComponent(a)+"="+encodeURIComponent(It()(t[a]))),e.push(n)}),e.join("&")}}]),t}()),Ze={install:function(t,e){t.http=qe,t.filter("statusFilters",function(t){return t?"是":"否"}),t.prototype.$http=qe}};a("Xcu2"),a("1CWy"),a("HBSQ");rt.default.config.productionTip=!1,rt.default.use(ot.a),rt.default.use(st.a),rt.default.use(it.a),rt.default.use(et.a),rt.default.use(X.a),rt.default.use(Q.a),rt.default.use(Y.a),rt.default.use(J.a),rt.default.use(H.a),rt.default.use(q.a),rt.default.use(j.a),rt.default.use(F.a),rt.default.use(B.a),rt.default.use(N.a),rt.default.use(L.a),rt.default.use(z.a),rt.default.use(S.a),rt.default.use(A.a),rt.default.use(D.a),rt.default.use(C.a),rt.default.use(y.a),rt.default.use(_.a),rt.default.use(b.a),rt.default.use(m.a),rt.default.use(p.a),rt.default.use(u.a.directive),rt.default.prototype.$loading=u.a.service,rt.default.prototype.$alert=r.a.alert,rt.default.prototype.$confirm=r.a.confirm,rt.default.prototype.$notice=l.a,rt.default.use(Ze),Pe.beforeEach(function(t,e,a){!function(t){if(xt.a)return xt()(t).length>0;for(var e in t)if(Object.hasOwnProperty(e))return!0;return!1}(vt.state.userMsg)?new n.a(function(t,e){rt.default.http.get("user/info/").then(function(e){t(e.data)}).catch(function(t){e(t)})}).then(function(t){vt.dispatch("setUserMsg",t),a()}).catch(function(t){a(t)}):a()});var He=a("pAxv");He.keys().forEach(function(t){var e=He(t);t=/.+\/(.+)\./.exec(t)[1];var a=gt()(kt()(t));rt.default.component(a,e.default||e)}),new rt.default({el:"#app",store:vt,router:Pe,components:{App:dt},template:"<App/>"})},OqBu:function(t,e){},PGug:function(t,e){},QW0Y:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"NotFound",data:function(){return{}},mounted:function(){},props:{type:{type:Number,default:1},redirectTo:{type:String,default:"/"}},methods:{}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"exception-page"},[this._m(0),this._v(" "),e("div",{staticClass:"right"},[e("h1",{staticClass:"item"},[this._v("404")]),this._v(" "),e("p",{staticClass:"item"},[this._v("抱歉，你访问的页面不存在")]),this._v(" "),e("div",{staticClass:"item"},[e("el-button",{attrs:{type:"primary"}},[e("router-link",{attrs:{to:{path:"/"}}},[this._v("返回首页")])],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("img",{attrs:{src:a("eB5y")}})])}]};var s=a("Z0/y")(i,n,!1,function(t){a("BnU3")},"data-v-367f818c",null);e.default=s.exports},REP8:function(t,e){},TIcQ:function(t,e){},TOK2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("4YfN"),n=a.n(i),s=a("19nM"),l={name:"AppTable",data:function(){return{currentPageData:[],computedTableData:[],total:this.tableData.length,searchText:"",noSearchFields:["operate"]}},props:{tableColumns:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},height:{type:Number},loading:{type:Boolean,default:!1},border:{type:Boolean,default:!0},title:{type:String,default:""},tableRows:{type:Number,default:10},formatterHandler:{type:Function},sortBy:{type:String|Array|Function},hasDetails:{type:Boolean,default:!1},hasEdit:{type:Boolean,default:!1},hasDelete:{type:Boolean,default:!1}},created:function(){Object(s.a)(this.tableColumns,this.tableData,{columnRedundancyWidth:60})},mounted:function(){this.setCurrentPageTableData(this.tableData,0,this.tableRows)},methods:{pageChange:function(t){var e=this.computedTableData,a=(t-1)*this.tableRows,i=t*this.tableRows;this.setCurrentPageTableData(e,a,i),this.$emit("onPageChange",t)},setCurrentPageTableData:function(t,e,a){this.currentPageData=t.slice(e,a)},details:function(t){this.$emit("onDetails",t)},edit:function(t){this.$emit("onEdit",t)},del:function(t){this.$emit("onDelete",t)},setIncludeColor:function(t){return t+="",""!==this.searchText.trim()&&!!~t.indexOf(this.searchText.trim())}},computed:{listeners:function(){return n()({},this.$listeners)}},watch:{searchText:function(t){var e=this;t=t.trim(),this.computedTableData=""===t?this.tableData:this.tableData.filter(function(a){return e.tableColumns.some(function(i){return!e.noSearchFields.includes(i.field)&&(!!a[i.field]&&!!~(a[i.field]+"").indexOf(t))})});var a=this.computedTableData;this.setCurrentPageTableData(a,0,this.tableRows)},tableData:function(t){this.setCurrentPageTableData(t,0,this.tableRows),this.computedTableData=t}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-table"},[a("div",{staticClass:"toolbar"},[a("span",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),a("AppOptions",t._g(t._b({},"AppOptions",t.$attrs,!1),t.listeners)),t._v(" "),a("el-input",{staticClass:"search",attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),t._v(" "),t._t("custom-toolbar")],2),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.currentPageData,sortable:!0,border:t.border,height:t.height,"header-cell-style":{background:"#EBEEF5",padding:"5px 0"}}},t._l(t.tableColumns,function(e){return a("el-table-column",{key:e.field,attrs:{fixed:e.fixed,prop:e.field,label:e.label,"min-width":e.width+"px","show-overflow-tooltip":!0,sortable:"operate"!==e.field,"sort-by":t.sortBy,"header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return["operate"===e.field?a("div",[t.hasDetails?a("el-button",{staticClass:"etl-btn mini",attrs:{type:"info",icon:"el-icon-message",title:"详情"},on:{click:function(e){t.details(i.row)}}}):t._e(),t._v(" "),t.hasEdit?a("el-button",{staticClass:"etl-btn mini",attrs:{type:"warning",icon:"el-icon-edit",title:"编辑"},on:{click:function(e){t.edit(i.row)}}}):t._e(),t._v(" "),t.hasDelete?a("el-button",{staticClass:"etl-btn mini",attrs:{type:"danger",icon:"el-icon-delete",title:"删除"},on:{click:function(e){t.del(i.row)}}}):t._e(),t._v(" "),t._t("operate",null,{row:i.row})],2):a("div",[e.slotName?[t._t(e.slotName,null,{row:i.row})]:e.formatter?[t._v("\n            "+t._s(e.formatter(i.row))+"\n          ")]:[a("span",{class:{"-include":t.setIncludeColor(i.row[e.field])}},[t._v(" "+t._s(i.row[e.field])+" ")])]],2)]}}])})})),t._v(" "),a("footer",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.tableRows,total:t.computedTableData.length},on:{"current-change":function(e){t.pageChange(e)}}})],1)],1)},staticRenderFns:[]};var r=a("Z0/y")(l,o,!1,function(t){a("/f9r")},"data-v-8cf8cdd4",null);e.default=r.exports},UIhx:function(t,e){},URxL:function(t,e){},VgaO:function(t,e){},Vjrc:function(t,e){},Xcu2:function(t,e){},YGXr:function(t,e){},YrjH:function(t,e){},bsMX:function(t,e){},cZtw:function(t,e){},dZio:function(t,e){},eB5y:function(t,e,a){t.exports=a.p+"static/img/no-page.9ed13bb.svg"},eQ09:function(t,e){},f45f:function(t,e){},fL4K:function(t,e,a){t.exports=a.p+"static/img/no-permission.2dda86a.svg"},ftiv:function(t,e){},"g++a":function(t,e){},hujf:function(t,e){},iAhg:function(t,e){},ja61:function(t,e){},lZdj:function(t,e){},muAc:function(t,e,a){t.exports=a.p+"static/img/server-error.990ae4d.svg"},n29k:function(t,e){},og3Y:function(t,e){},pAxv:function(t,e,a){var i={"./app-dialog/AppDialog.vue":"MyZu","./app-exception/NoPermission.vue":"Ixyp","./app-exception/NotFound.vue":"QW0Y","./app-exception/ServerError.vue":"0daQ","./app-menu/AppMenu.vue":"rmpJ","./app-menu/AppMenuItem.vue":"A05D","./app-options/AppOptions.vue":"LPfq","./app-options/MultiSelect.vue":"+Lha","./app-options/SingleSelect.vue":"MOvJ","./app-tab/AppTab.vue":"BSN6","./app-table/AppTable.vue":"TOK2"};function n(t){return a(s(t))}function s(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}n.keys=function(){return Object.keys(i)},n.resolve=s,t.exports=n,n.id="pAxv"},pExH:function(t,e){},qdpj:function(t,e){},r6BI:function(t,e){},rmpJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"AppMenu",data:function(){return{}},props:{collapse:{type:Boolean,default:!1}},methods:{},computed:{getDefaultOpens:function(){return this.$route.matched.map(function(t){return t.path})}}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-menu",{staticClass:"app-menu",attrs:{router:!0,"collapse-transition":!1,"background-color":"#001529","text-color":"#a3b0bf","active-text-color":"#fff","default-openeds":this.getDefaultOpens,collapse:this.collapse}},[e("AppMenuItem",this._b({},"AppMenuItem",this.$attrs,!1))],1)},staticRenderFns:[]};var s=a("Z0/y")(i,n,!1,function(t){a("pExH")},"data-v-497f1d04",null);e.default=s.exports},sysB:function(t,e){},tMTd:function(t,e){},tUpD:function(t,e){},ubY8:function(t,e){},vRz6:function(t,e){},xWAK:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.63b619fa6769325d1b98.js.map